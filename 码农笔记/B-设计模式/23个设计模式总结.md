---
layout:     post
title:   è®¾è®¡æ¨¡å¼è¯»ä¹¦ç¬”è®°
subtitle:   
header-img: img/post-bg-re-vs-ng2.jpg
catalog: true
category: 
tags:
       - è®¾è®¡æ¨¡å¼
---

>stay hungry. stay foolish 

## å‰è¨€
### ç±»ä¹‹é—´çš„å…³ç³»ï¼š

![image.png](https://raw.githubusercontent.com/guchaolong/articleImgs/master/20230822041242.png)

### 7ä¸ªåŸåˆ™
* <mark style="background: #FF5582A6;">å•</mark>ä¸€èŒè´£ï¼šèŒè´£è¦<mark style="background: #D2B3FFA6;">å•ä¸€</mark>ï¼Œä¸èƒ½æŠŠ<mark style="background: #D2B3FFA6;">è¿‡å¤šçš„èŒè´£</mark>æ”¾ä¸€ä¸ªç±»ä¸­
* <mark style="background: #FF5582A6;">å¼€</mark>é—­ï¼šè½¯ä»¶å®ä½“å¯¹<mark style="background: #D2B3FFA6;">æ‰©å±•æ˜¯å¼€æ”¾</mark>çš„ï¼Œä½†å¯¹<mark style="background: #D2B3FFA6;">ä¿®æ”¹æ˜¯å…³é—­</mark>çš„
* <mark style="background: #FF5582A6;">é‡Œ</mark>æ°æ›¿æ¢ï¼šå¯ä»¥<mark style="background: #D2B3FFA6;">æ¥å—</mark><mark style="background: #D2B3FFA6;">åŸºç±»</mark>ï¼Œåˆ™<mark style="background: #D2B3FFA6;">å¿…ç„¶</mark>å¯ä»¥<mark style="background: #D2B3FFA6;">æ¥å—å­ç±»</mark>
* <mark style="background: #FF5582A6;">ä¾</mark>èµ–å€’ç½®ï¼šé’ˆå¯¹<mark style="background: #D2B3FFA6;">æŠ½è±¡å±‚</mark>ç¼–ç¨‹ï¼Œè€Œä¸æ˜¯é’ˆå¯¹<mark style="background: #D2B3FFA6;">å…·ä½“ç±»</mark>ç¼–ç¨‹
* <mark style="background: #FF5582A6;">æ¥</mark>å£éš”ç¦»ï¼šç”¨å¤šä¸ª<mark style="background: #D2B3FFA6;">ä¸“é—¨çš„æ¥å£</mark>å–ä»£ä¸€ä¸ª<mark style="background: #D2B3FFA6;">ç»Ÿä¸€çš„æ¥å£</mark>
* <mark style="background: #FF5582A6;">åˆ</mark>æˆå¤ç”¨ï¼šå°½é‡å¤šä½¿ç”¨å…³è”å…³ç³»ä¸­çš„<mark style="background: #D2B3FFA6;">ç»„åˆå’Œèšåˆ</mark>ï¼Œå°‘ä½¿ç”¨ç”šè‡³ä¸é€‚ç”¨<mark style="background: #D2B3FFA6;">ç»§æ‰¿</mark>
* <mark style="background: #FF5582A6;">è¿ª</mark>ç±³ç‰¹ï¼šä¸€ä¸ªè½¯ä»¶å®ä½“<mark style="background: #D2B3FFA6;">å¯¹å…¶ä»–å®ä½“çš„å¼•ç”¨è¶Šå°‘è¶Šå¥½</mark>ï¼Œæˆ–è€…è¯´å¦‚æœä¸¤ä¸ªç±»<mark style="background: #D2B3FFA6;">ä¸å¿…</mark>å½¼æ­¤<mark style="background: #D2B3FFA6;">ç›´æ¥é€šä¿¡</mark>ï¼Œé‚£ä¹ˆè¿™<mark style="background: #D2B3FFA6;">ä¸¤ä¸ªç±»</mark>å°±ä¸åº”è¯¥å‘ç”Ÿ<mark style="background: #D2B3FFA6;">ç›´æ¥çš„ç›¸äº’ä½œç”¨</mark>ï¼Œè€Œæ˜¯é€šè¿‡å¼•å…¥ä¸€ä¸ª<mark style="background: #D2B3FFA6;">ç¬¬ä¸‰è€…</mark>å‘ç”Ÿ<mark style="background: #D2B3FFA6;">é—´æ¥äº¤äº’</mark>

### åˆ†ç±»
ç›®çš„
>åˆ›å»ºå‹ï¼šå• åŸ å»ºé€  ä¸¤å·¥å‚
 ç»“æ„å‹ï¼šé€‚ æ¡¥ ç»„ è£… å¤– äº« ä»£
 è¡Œä¸ºå‹ï¼šèŒ å‘½ è§£ è¿­ ä¸­ å¤‡ è§‚ çŠ¶ ç­– æ¨¡ è®¿

  

èŒƒå›´ï¼š
> ç±»æ¨¡å¼ï¼šå¤„ç†ç±»å’Œå­ç±»ä¹‹é—´çš„å…³ç³»ï¼Œè¿™äº›å…³ç³»é€šè¿‡ç»§æ‰¿å»ºç«‹ï¼Œåœ¨ç¼–è¯‘æ—¶åˆ»å°±è¢«ç¡®å®šä¸‹æ¥ï¼Œæ˜¯é™æ€çš„,4ä¸ªï¼šå·¥å‚æ–¹æ³•ã€ï¼ˆç±»ï¼‰é€‚é…å™¨ã€è§£é‡Šå™¨ã€æ¨¡æ¿æ–¹æ³•
 
> å¯¹è±¡æ¨¡å¼ï¼šå¤„ç†å¯¹è±¡ä¹‹é—´çš„å…³ç³»ï¼Œè¿™äº›å…³ç³»åœ¨è¿è¡Œæ—¶åˆ»å˜åŒ–ï¼Œæ›´å…·åŠ¨æ€æ€§ï¼ˆé™¤ä¸Šè¿°4ä¸ªï¼Œå…¶ä»–éƒ½å±äºå¯¹è±¡æ¨¡å¼ï¼‰


## åˆ›å»ºå‹

### 1ã€å•ä¾‹

ç®€ä»‹ï¼š

åªéœ€è¦**ä¸€ä¸ªå®ä¾‹**ï¼Œæ•´ä¸ªç³»ç»Ÿåªéœ€è¦**ä¸€ä¸ªå…¨å±€å¯¹è±¡**ï¼Œå¦‚å„ç§Managerã€Factoryï¼Œé˜²æ­¢åˆ«äººnewå‡ºå¤šä¸ªå¯¹è±¡ï¼Œå•ä¾‹æ¨¡å¼ä¸¥æ ¼æ¥è¯´æœ‰8ç§å†™æ³•ï¼Œå…¶ä¸­æœ‰ä¸¤ç§æ˜¯å®Œç¾çš„

åº”ç”¨åœºæ™¯ï¼š

* å¦‚æŸä¸ªæœåŠ¡å™¨ç¨‹åºä¸­ï¼Œå°†æœåŠ¡å™¨çš„**é…ç½®ä¿¡æ¯**æ”¾åˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œè¿™äº›é…ç½®æ•°æ®ç”±ä¸€ä¸ªå•ä¾‹å¯¹è±¡ç»Ÿä¸€è¯»å–ï¼Œç„¶åæœåŠ¡å™¨è¿›ç¨‹ä¸­çš„å¯¹è±¡å†é€šè¿‡è¿™ä¸ªå•ä¾‹å¯¹è±¡è·å–åˆ°é…ç½®ä¿¡æ¯

* é‡é‡çº§å¯¹è±¡ï¼Œå¦‚æ•°æ®åº“**è¿æ¥æ± **ã€å¤šçº¿ç¨‹çš„**çº¿ç¨‹æ± **



ä¸ºä»€ä¹ˆç”¨å•ä¾‹ï¼šå¯¹è±¡åœ¨æ•´ä¸ªç³»ç»Ÿä¸­åªæœ‰ä¸€ä»½ï¼Œæ‰€æœ‰è¯·æ±‚éƒ½ç”¨åŒä¸€ä¸ªå¯¹è±¡æ¥å¤„ç†ï¼Œå¦‚**serviceå’ŒDao**å±‚å¯¹è±¡ä¸€èˆ¬éƒ½æ˜¯å•ä¾‹ï¼Œæ²¡æœ‰å¿…è¦æ¯ä¸ªè¯·æ±‚éƒ½æ–°å»ºä¸€ä¸ªå¯¹è±¡ï¼Œè¿™æ ·ä¼š**æµªè´¹CPUå’Œå†…å­˜**



ä¸ºä»€ä¹ˆä½¿ç”¨å¤šä¾‹ï¼šå¯¹è±¡åœ¨ç³»ç»Ÿä¸­å¯ä»¥æœ‰å¤šä¸ªå®ä¾‹ï¼Œæ¯ä¸ªè¯·æ±‚ç”¨ä¸€ä¸ªæ–°çš„å¯¹è±¡æ¥å¤„ç†ï¼Œå¦‚**action**,è¿™æ ·å¯ä»¥é˜²æ­¢å¹¶å‘é—®é¢˜ï¼Œå³ä¸€ä¸ªè¯·æ±‚æ”¹å˜äº†å¯¹è±¡çš„çŠ¶æ€ï¼Œæ­¤æ—¶å¯¹è±¡åˆå¤„ç†å¦ä¸€ä¸ªè¯·æ±‚ï¼Œè€Œä¹‹å‰è¯·æ±‚å¯¹å¯¹è±¡çŠ¶æ€çš„æ”¹å˜å¯¼è‡´å¯¹è±¡å¯¹å¦ä¸€ä¸ªè¯·æ±‚åšäº†é”™è¯¯å¤„ç†

```java
/**
 * é¥¿æ±‰å¼1
 * 
 * åŠ è½½EagerSingletonç±»æ—¶å°±ä¼šç”Ÿæˆå®ä¾‹ï¼ŒJVMä¿è¯çº¿ç¨‹å®‰å…¨
 * ç®€å•å®ç”¨ï¼Œæ¨èï¼
 * å”¯ä¸€ç¼ºç‚¹ï¼Œä¸ç®¡ç”¨åˆ°ä¸å¦ï¼Œç±»åŠ è½½æ—¶å°±ä¼šåˆ›å»ºå®ä¾‹
 */
public class EagerSingleton {
    private static final EagerSingleton eagerSingleton = new EagerSingleton();

    private EagerSingleton() {

    }

    public static EagerSingleton getInstance() {
        return eagerSingleton;
    }
}
```



```java
/**
 * Description:
 * é¥¿æ±‰å¼2
 * æŠŠå®ä¾‹åŒ–è¿‡ç¨‹æ”¾åˆ°é™æ€ä»£ç å—ä¸­ï¼Œæœ¬è´¨ä¸Šå’ŒEagerSingletonæ˜¯ä¸€æ ·çš„
 *
 * @author guchaolong
 * @date 2020/5/24 22:21
 */
public class EagerSingleton02 {
    private static EagerSingleton02 instance;

    static {
        instance = new EagerSingleton02();
    }

    private EagerSingleton02() {

    }

    public static EagerSingleton02 getInstance() {
        return instance;
    }
}
```



```java
/**
 * æ‡’æ±‰å¼
 * ç¬¬ä¸€æ¬¡è°ƒç”¨getInstance()æ–¹æ³•æ—¶æ‰ç”Ÿæˆ
 */
public class LazySingleton {
    //volatileå…³é”®å­—ï¼Œå¯ä»¥é˜²æ­¢æŒ‡ä»¤é‡æ’åº
    private volatile static LazySingleton instance = null;

    private LazySingleton() {

    }

    /**
     * éçº¿ç¨‹å®‰å…¨
     * @return
     */
    public static LazySingleton getInstance0(){
        if(instance == null){
            instance = new LazySingleton();
        }
        return instance;
    }

    /**
     * åŠ ä¸Šsynchronizedï¼Œé˜²æ­¢å¤šçº¿ç¨‹åŒæ—¶é¦–æ¬¡è®¿é—®,å› ä¸ºæ˜¯åŠ åœ¨æ–¹æ³•ä¸Šï¼Œæ•ˆç‡ä¸é«˜
     * @return
     */
    public static synchronized LazySingleton getInstance() {
        if (instance == null) {
            instance = new LazySingleton();
        }
        return instance;
    }

    /**
     * åŒé‡æ£€æŸ¥ æ€§èƒ½è¾ƒé«˜
     * @return
     */
    public static LazySingleton getInstance2() {
        if (instance == null) {
            synchronized (LazySingleton.class) {
                if (instance == null) {
                    instance = new LazySingleton();
                }
            }
        }
        return instance;
    }

}
```



```java
/**
 * Description:åŠ è½½å¤–éƒ¨ç±»æ—¶ä¸ä¼šåŠ è½½å†…éƒ¨ç±»ï¼Œè¿™æ ·å¯ä»¥å®ç°æ‡’åŠ è½½
 *
 * @author guchaolong
 * @date 2020/5/24 22:31
 */
public class LazySingleton02 {

    private LazySingleton02() {

    }

    /**
     * ç§æœ‰é™æ€å†…éƒ¨ç±»
     */
    private static class SingletonHolder {
        private final static LazySingleton02 instance = new LazySingleton02();
    }

    public static LazySingleton02 getInstance() {
        return SingletonHolder.instance;
    }
}
```



```java
/**
 * Description:
 * ä¸ä»…å¯ä»¥å®ç°å•ä¾‹ï¼Œè¿˜å¯ä»¥é˜²æ­¢ååºåˆ—åŒ–
 * <p>
 * åœ¨effective javaï¼ˆè¿™æœ¬ä¹¦çœŸçš„å¾ˆæ£’ï¼‰ä¸­è¯´é“ï¼Œæœ€ä½³çš„å•ä¾‹å®ç°æ¨¡å¼å°±æ˜¯æšä¸¾æ¨¡å¼ã€‚
 * åˆ©ç”¨æšä¸¾çš„ç‰¹æ€§ï¼Œè®©JVMæ¥å¸®æˆ‘ä»¬ä¿è¯çº¿ç¨‹å®‰å…¨å’Œå•ä¸€å®ä¾‹çš„é—®é¢˜ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œå†™æ³•è¿˜ç‰¹åˆ«ç®€å•
 * <p>
 * ç›´æ¥é€šè¿‡Singleton.INSTANCE.doSomething()çš„æ–¹å¼è°ƒç”¨å³å¯ã€‚æ–¹ä¾¿ã€ç®€æ´åˆå®‰å…¨
 *
 * @author guchaolong
 * @date 2020/5/24 22:40
 */
public enum SingletonEnum {
    INSTANCE;

    public void doSomething() {
        System.out.println("doSomething");
    }
}
```



### 2ã€åŸå‹
åŸå‹æ¨¡å¼ï¼ˆPrototype Patternï¼‰æ˜¯ç”¨äº<mark style="background: #FF5582A6;">åˆ›å»ºé‡å¤çš„å¯¹è±¡</mark>ï¼ŒåŒæ—¶åˆèƒ½ä¿è¯æ€§èƒ½ã€‚è¿™ç§ç±»å‹çš„è®¾è®¡æ¨¡å¼å±äºåˆ›å»ºå‹æ¨¡å¼ï¼Œå®ƒæä¾›äº†ä¸€ç§åˆ›å»ºå¯¹è±¡çš„æœ€ä½³æ–¹å¼ã€‚

åœ¨è½¯ä»¶ç³»ç»Ÿä¸­,æœ‰æ—¶å€™éœ€è¦<mark style="background: #FF5582A6;">å¤šæ¬¡åˆ›å»ºæŸä¸€ç±»å‹çš„å¯¹è±¡</mark>ï¼Œä¸ºäº†ç®€åŒ–åˆ›å»ºè¿‡ç¨‹,å¯ä»¥åªåˆ›å»ºä¸€ä¸ªå¯¹è±¡,ç„¶åå†é€šè¿‡<mark style="background: #FF5582A6;">å…‹éš†</mark>çš„æ–¹å¼å¤åˆ¶å‡ºå¤šä¸ªç›¸åŒçš„å¯¹è±¡,è¿™å°±æ˜¯åŸå‹æ¨¡å¼çš„è®¾è®¡æ€æƒ³ã€‚

åŸå‹æ¨¡å¼çš„åŸºæœ¬å·¥ä½œåŸç†æ˜¯é€šè¿‡å°†ä¸€ä¸ªåŸå‹å¯¹è±¡ä¼ ç»™é‚£ä¸ªè¦å‘åŠ¨åˆ›å»ºçš„å¯¹è±¡,è¿™ä¸ªè¦å‘åŠ¨åˆ›å»ºçš„å¯¹è±¡é€šè¿‡è¯·æ±‚åŸå‹å¯¹è±¡å¤åˆ¶åŸå‹è‡ªå·±æ¥å®ç°åˆ›å»ºè¿‡ç¨‹


åŸå‹æ¨¡å¼åŒ…å«å¦‚ä¸‹è§’è‰² ğŸ‘‡
1. **Prototype(æŠ½è±¡åŸå‹ç±»)**
æŠ½è±¡åŸå‹ç±»æ˜¯å®šä¹‰å…·æœ‰å…‹éš†è‡ªå·±çš„æ–¹æ³•çš„æ¥å£,æ˜¯æ‰€æœ‰å…·ä½“åŸå‹ç±»çš„å…¬å…±çˆ¶ç±»,å¯ä»¥æ˜¯æŠ½è±¡ç±»,ä¹Ÿå¯ä»¥æ˜¯æ¥å£ã€‚

2. **ConcretePrototype(å…·ä½“åŸå‹ç±»)**
å…·ä½“åŸå‹ç±»å®ç°å…·ä½“çš„å…‹éš†æ–¹æ³•,åœ¨å…‹éš†æ–¹æ³•ä¸­è¿”å›è‡ªå·±çš„ä¸€ä¸ªå…‹éš†å¯¹è±¡ã€‚

3. **Client(å®¢æˆ·ç±»)**
å®¢æˆ·ç±»è®©ä¸€ä¸ªåŸå‹å…‹éš†è‡ªèº«,ä»è€Œåˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡ã€‚åœ¨å®¢æˆ·ç±»ä¸­åªéœ€è¦ç›´æ¥å®ä¾‹åŒ–æˆ–é€šè¿‡å·¥å‚æ–¹æ³•ç­‰æ–¹å¼åˆ›å»ºä¸€ä¸ªå¯¹è±¡,å†é€šè¿‡è°ƒç”¨è¯¥å¯¹è±¡çš„å…‹éš†æ–¹æ³•å¤åˆ¶å¾—åˆ°å¤šä¸ªç›¸åŒçš„å¯¹è±¡


`åŸå‹æ¨¡å¼çš„å…‹éš†åˆ†ä¸ºæµ…å…‹éš†å’Œæ·±å…‹éš†ã€‚`

- æµ…å…‹éš†ï¼šåˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ï¼Œæ–°å¯¹è±¡çš„å±æ€§å’ŒåŸæ¥å¯¹è±¡å®Œå…¨ç›¸åŒï¼Œå¯¹äºéåŸºæœ¬ç±»å‹å±æ€§ï¼Œä»æŒ‡å‘åŸæœ‰å±æ€§æ‰€æŒ‡å‘çš„å¯¹è±¡çš„å†…å­˜åœ°å€
- æ·±å…‹éš†ï¼šåˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ï¼Œå±æ€§ä¸­å¼•ç”¨çš„å…¶ä»–å¯¹è±¡ä¹Ÿä¼šè¢«å…‹éš†ï¼Œä¸å†æŒ‡å‘åŸæœ‰å¯¹è±¡åœ°å€ã€‚


### å¯¹è±¡çš„åˆ›å»ºä¸ä½¿ç”¨-å·¥å‚çš„ä½œç”¨

- ä¸€ä¸ªå¯¹è±¡ç›¸å…³çš„èŒè´£

  1. å¯¹è±¡**æœ¬èº«**æ‰€å…·æœ‰çš„èŒè´£
  2. **åˆ›å»º**å¯¹è±¡çš„èŒè´£
  3. **ä½¿ç”¨**å¯¹è±¡çš„èŒè´£

- Javaä¸­åˆ›å»ºå¯¹è±¡çš„æ–¹å¼

  1. newç›´æ¥åˆ›å»ºï¼ˆæœ€ç®€å•ï¼Œä½†æ˜¯çµæ´»æ€§è¾ƒå·®ï¼‰
  2. åå°„
  3. clone()
  4. é€šè¿‡å·¥å‚ç±»åˆ›å»ºå¯¹è±¡

  ```java
  
  ```

  åœ¨LoginActionç±»ä¸­å®šä¹‰äº†ä¸€ä¸ªUserDAOç±»å‹çš„å¯¹è±¡udaoï¼Œåœ¨LoginActionçš„æ„é€ å‡½æ•°ä¸­åˆ›å»ºäº†JDBCUserDAOç±»å‹çš„udaoå¯¹è±¡ï¼Œå¹¶åœ¨execute()æ–¹æ³•ä¸­è°ƒç”¨äº†udaoå¯¹è±¡çš„findUserById()æ–¹æ³•ï¼Œè¿™æ®µä»£ç çœ‹ä¸Šå»å¹¶æ²¡æœ‰ä»€ä¹ˆé—®é¢˜ã€‚ä¸‹é¢æˆ‘ä»¬æ¥åˆ†æä¸€ä¸‹LoginActionå’ŒUserDAOä¹‹é—´çš„å…³ç³»ï¼ŒLoginActionç±»è´Ÿè´£åˆ›å»ºäº†ä¸€ä¸ªUserDAOå­ç±»çš„å¯¹è±¡å¹¶ä½¿ç”¨UserDAOçš„æ–¹æ³•æ¥å®Œæˆç›¸åº”çš„ä¸šåŠ¡å¤„ç†ï¼Œä¹Ÿå°±æ˜¯è¯´LoginActionå³è´Ÿè´£udaoçš„åˆ›å»ºåˆè´Ÿè´£udaoçš„ä½¿ç”¨ï¼Œ**åˆ›å»ºå¯¹è±¡å’Œä½¿ç”¨å¯¹è±¡çš„èŒè´£è€¦åˆåœ¨ä¸€èµ·**ï¼Œè¿™æ ·çš„è®¾è®¡ä¼šå¯¼è‡´ä¸€ä¸ªå¾ˆä¸¥é‡çš„é—®é¢˜ï¼šå¦‚æœåœ¨LoginActionä¸­å¸Œæœ›èƒ½å¤Ÿä½¿ç”¨UserDAOçš„å¦ä¸€ä¸ªå­ç±»å¦‚HibernateUserDAOç±»å‹çš„å¯¹è±¡ï¼Œå¿…é¡»ä¿®æ”¹LoginActionç±»çš„æºä»£ç ï¼Œè¿åäº†â€œå¼€é—­åŸåˆ™â€

  æœ€å¸¸ç”¨çš„ä¸€ç§è§£å†³æ–¹æ³•æ˜¯å°†udaoå¯¹è±¡çš„åˆ›å»ºèŒè´£ä»LoginActionç±»ä¸­ç§»é™¤ï¼Œåœ¨LoginActionç±»ä¹‹å¤–åˆ›å»ºå¯¹è±¡ï¼Œé‚£ä¹ˆè°æ¥è´Ÿè´£åˆ›å»ºUserDAOå¯¹è±¡å‘¢ï¼Ÿç­”æ¡ˆæ˜¯ï¼šå·¥å‚ç±»ã€‚é€šè¿‡å¼•å…¥å·¥å‚ç±»ï¼Œå®¢æˆ·ç±»ï¼ˆå¦‚LoginActionï¼‰ä¸æ¶‰åŠå¯¹è±¡çš„åˆ›å»ºï¼Œå¯¹è±¡çš„åˆ›å»ºè€…ä¹Ÿä¸ä¼šæ¶‰åŠå¯¹è±¡çš„ä½¿ç”¨

  å°†å¯¹è±¡çš„åˆ›å»ºå’Œä½¿ç”¨åˆ†ç¦»è¿˜æœ‰ä¸€ä¸ªå¥½å¤„ï¼šé˜²æ­¢ç”¨æ¥å®ä¾‹åŒ–ä¸€ä¸ªç±»çš„æ•°æ®å’Œä»£ç åœ¨å¤šä¸ªç±»ä¸­åˆ°å¤„éƒ½æ˜¯ï¼Œå¯ä»¥å°†æœ‰å…³åˆ›å»ºçš„çŸ¥è¯†æ¬ç§»åˆ°ä¸€ä¸ªå·¥å‚ç±»ä¸­ï¼Œè¿™åœ¨Joshua Kerievskyçš„ã€Šé‡æ„ä¸æ¨¡å¼ã€‹ä¸€ä¹¦ä¸­æœ‰ä¸“é—¨çš„ä¸€èŠ‚æ¥è¿›è¡Œä»‹ç»ã€‚å› ä¸ºæœ‰æ—¶å€™æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªå¯¹è±¡ä¸åªæ˜¯ç®€å•è°ƒç”¨å…¶æ„é€ å‡½æ•°ï¼Œè¿˜éœ€è¦è®¾ç½®ä¸€äº›å‚æ•°ï¼Œå¯èƒ½è¿˜éœ€è¦é…ç½®ç¯å¢ƒï¼Œå¦‚æœå°†è¿™äº›ä»£ç æ•£è½åœ¨æ¯ä¸€ä¸ªåˆ›å»ºå¯¹è±¡çš„å®¢æˆ·ç±»ä¸­ï¼ŒåŠ¿å¿…ä¼šå‡ºç°ä»£ç é‡å¤ã€åˆ›å»ºè”“å»¶çš„é—®é¢˜ï¼Œè€Œè¿™äº›å®¢æˆ·ç±»å…¶å®æ— é¡»æ‰¿æ‹…å¯¹è±¡çš„åˆ›å»ºå·¥ä½œï¼Œå®ƒä»¬åªéœ€ä½¿ç”¨å·²åˆ›å»ºå¥½çš„å¯¹è±¡å°±å¯ä»¥äº†ã€‚æ­¤æ—¶ï¼Œå¯ä»¥å¼•å…¥å·¥å‚ç±»æ¥å°è£…å¯¹è±¡çš„åˆ›å»ºé€»è¾‘å’Œå®¢æˆ·ä»£ç çš„å®ä¾‹åŒ–/é…ç½®é€‰é¡¹

  æ˜¯å¦éœ€è¦ä¸ºè®¾è®¡ä¸­çš„æ¯ä¸€ä¸ªç±»éƒ½é…å¤‡ä¸€ä¸ªå·¥å‚ç±»ï¼Ÿç­”æ¡ˆæ˜¯ï¼šå…·ä½“æƒ…å†µå…·ä½“åˆ†æã€‚å¦‚æœäº§å“ç±»å¾ˆç®€å•ï¼Œè€Œä¸”ä¸å­˜åœ¨å¤ªå¤šå˜æ•°ï¼Œå…¶æ„é€ è¿‡ç¨‹ä¹Ÿå¾ˆç®€å•ï¼Œæ­¤æ—¶æ— é¡»ä¸ºå…¶æä¾›å·¥å‚ç±»ï¼Œç›´æ¥åœ¨ä½¿ç”¨ä¹‹å‰å®ä¾‹åŒ–å³å¯ï¼Œä¾‹å¦‚Javaè¯­è¨€ä¸­çš„Stringç±»ï¼Œæˆ‘ä»¬å°±æ— é¡»ä¸ºå®ƒä¸“é—¨æä¾›ä¸€ä¸ªStringFactoryï¼Œè¿™æ ·åšåè€Œæœ‰ç‚¹åƒæ€é¸¡ç”¨ç‰›åˆ€ï¼Œå¤§æå°ç”¨ï¼Œè€Œä¸”ä¼šå¯¼è‡´å·¥å‚æ³›æ»¥ï¼Œå¢åŠ ç³»ç»Ÿçš„å¤æ‚åº¦ã€‚


### ç®€å•å·¥å‚æ¨¡å¼

- ç®€ä»‹

  å½“éœ€è¦ä½¿ç”¨ä¸€ä¸ªå¯¹è±¡çš„æ—¶å€™ï¼Œæ™®é€šçš„åšæ³•æ˜¯newï¼Œéœ€è¦å…¶ä»–å¯¹è±¡çš„æ—¶å€™ï¼Œåˆè¦æ”¹ä»£ç ï¼Œnewå…¶ä»–å¯¹è±¡ï¼Œè¿™æ ·çš„è¯ç ´åäº†å°è£…æ€§ï¼Œå¯ä»¥ä½¿ç”¨ä¸€ä¸ªå·¥å‚ç±»ï¼Œè´Ÿè´£è¯¥ç³»åˆ—å¯¹è±¡çš„åˆ›å»ºï¼Œä½¿ç”¨çš„æ—¶å€™ç›´æ¥è°ƒç”¨å·¥å‚ç±»çš„æ–¹æ³•å°±è¡Œï¼Œè°ƒç”¨æ–¹ä¸éœ€è¦çŸ¥é“åˆ›å»ºçš„ç»†èŠ‚

- è§’è‰²

  - **Factoryï¼ˆå·¥å‚è§’è‰²ï¼‰ï¼š**å·¥å‚è§’è‰²å³å·¥å‚ç±»ï¼Œå®ƒæ˜¯ç®€å•å·¥å‚æ¨¡å¼çš„æ ¸å¿ƒï¼Œè´Ÿè´£å®ç°åˆ›å»ºæ‰€æœ‰äº§å“å®ä¾‹çš„å†…éƒ¨é€»è¾‘ï¼›å·¥å‚ç±»å¯ä»¥è¢«å¤–ç•Œç›´æ¥è°ƒç”¨ï¼Œåˆ›å»ºæ‰€éœ€çš„äº§å“å¯¹è±¡ï¼›åœ¨å·¥å‚ç±»ä¸­æä¾›äº†é™æ€çš„å·¥å‚æ–¹æ³•factoryMethod()ï¼Œå®ƒçš„è¿”å›ç±»å‹ä¸ºæŠ½è±¡äº§å“ç±»å‹Product
  - **Productï¼ˆæŠ½è±¡äº§å“è§’è‰²ï¼‰ï¼š**å®ƒæ˜¯å·¥å‚ç±»æ‰€åˆ›å»ºçš„æ‰€æœ‰å¯¹è±¡çš„çˆ¶ç±»ï¼Œå°è£…äº†å„ç§äº§å“å¯¹è±¡çš„å…¬æœ‰æ–¹æ³•ï¼Œå®ƒçš„å¼•å…¥å°†æé«˜ç³»ç»Ÿçš„çµæ´»æ€§ï¼Œä½¿å¾—åœ¨å·¥å‚ç±»ä¸­åªéœ€å®šä¹‰ä¸€ä¸ªé€šç”¨çš„å·¥å‚æ–¹æ³•ï¼Œå› ä¸ºæ‰€æœ‰åˆ›å»ºçš„å…·ä½“äº§å“å¯¹è±¡éƒ½æ˜¯å…¶å­ç±»å¯¹è±¡
  - **ConcreteProductï¼ˆå…·ä½“äº§å“è§’è‰²ï¼‰ï¼š**å®ƒæ˜¯ç®€å•å·¥å‚æ¨¡å¼çš„åˆ›å»ºç›®æ ‡ï¼Œæ‰€æœ‰è¢«åˆ›å»ºçš„å¯¹è±¡éƒ½å……å½“è¿™ä¸ªè§’è‰²çš„æŸä¸ªå…·ä½“ç±»çš„å®ä¾‹ã€‚æ¯ä¸€ä¸ªå…·ä½“äº§å“è§’è‰²éƒ½ç»§æ‰¿äº†æŠ½è±¡äº§å“è§’è‰²ï¼Œéœ€è¦å®ç°åœ¨æŠ½è±¡äº§å“ä¸­å£°æ˜çš„æŠ½è±¡æ–¹æ³•

- ç±»å›¾



  ![](https://raw.githubusercontent.com/guchaolong/guchaolong.github.io/master/_posts_img/design_pattern/1590593557215.png)

  ```java
  //åŸºç±»å¯¹è±¡ï¼ŒæŠ½è±¡çš„æ”¯ä»˜æ–¹æ³•
  public abstract class AbstractPay{
      public abstract void pay();
  }
  
  //å…·ä½“çš„æ”¯ä»˜æ–¹å¼
  public class CashPay extends AbstractPay {
      @Override
      public void pay() {
          System.out.println("ç°é‡‘æ”¯ä»˜");
      }
  }
  
  //å…·ä½“çš„æ”¯ä»˜æ–¹å¼
  public class CreditcardPay extends AbstractPay {
      @Override
      public void pay() {
          System.out.println("ä¿¡ç”¨å¡æ”¯ä»˜");
      }
  }
  
  /**
   *
   * è·å¾—æ”¯ä»˜æ–¹å¼çš„å·¥å‚ç±»ï¼Œæ ¹æ®ä¼ å…¥çš„å‚æ•°è·å–ç›¸åº”çš„æ”¯ä»˜æ–¹å¼
   *
   * å¦‚æœæ–°å¢æ”¯ä»˜æ–¹å¼ï¼Œå°±éœ€è¦ä¿®æ”¹è¿™ä¸ªå·¥å‚ç±»ï¼ˆè¿æ³•å¼€é—­åŸåˆ™ï¼‰
   */
  public class PayMethodFactory {
      public static AbstractPay getPay(String pay){
          //æ­¤å¤„å¯ä»¥æœ‰å‰ç½®æ“ä½œï¼Œå¦‚æƒé™åˆ¤æ–­ã€æ—¥å¿—è®°å½•ç­‰
          if("cash".equals(pay)){
              return new CashPay();
          }else if("creditcard".equals(pay)){
              return new CreditcardPay();
          }
          return null;
      }
  }
  
  /**
   * è·å–ä¸€ä¸ªæŠ½è±¡ç±»å‹çš„æ”¯ä»˜æ–¹å¼ï¼Œä¼ å…¥å‚æ•° å–å¾—ç›¸åº”çš„å…·ä½“æ”¯ä»˜æ–¹å¼
   */
  public class Client {
      public static void main(String[] args) {
          AbstractPay pay = PayMethodFactory.getPay("cash");
          pay.pay();
      }
  }
  ```



### 3ã€å·¥å‚æ–¹æ³•

- æ¦‚è¿°

  åœ¨ç®€å•å·¥å‚æ¨¡å¼ä¸­åªæä¾›<mark style="background: #FF5582A6;">ä¸€ä¸ªå·¥å‚ç±»</mark>ï¼Œè¯¥å·¥å‚ç±»å¤„äºå¯¹äº§å“ç±»è¿›è¡Œå®ä¾‹åŒ–çš„ä¸­å¿ƒä½ç½®ï¼Œå®ƒéœ€è¦çŸ¥é“<mark style="background: #FF5582A6;">æ¯ä¸€ä¸ªäº§å“å¯¹è±¡çš„åˆ›å»ºç»†èŠ‚</mark>ï¼Œå¹¶å†³å®šä½•æ—¶å®ä¾‹åŒ–å“ªä¸€ä¸ªäº§å“ç±»ã€‚ç®€å•å·¥å‚æ¨¡å¼æœ€å¤§çš„ç¼ºç‚¹æ˜¯å½“æœ‰<mark style="background: #FF5582A6;">æ–°äº§å“è¦</mark>åŠ å…¥åˆ°ç³»ç»Ÿä¸­æ—¶ï¼Œå¿…é¡»<mark style="background: #FF5582A6;">ä¿®æ”¹å·¥å‚ç±»</mark>ï¼Œéœ€è¦åœ¨å…¶ä¸­åŠ å…¥å¿…è¦çš„ä¸šåŠ¡é€»è¾‘ï¼Œè¿™è¿èƒŒäº†â€œ<mark style="background: #FF5582A6;">å¼€é—­åŸåˆ™</mark>â€ã€‚æ­¤å¤–ï¼Œåœ¨ç®€å•å·¥å‚æ¨¡å¼ä¸­ï¼Œæ‰€æœ‰çš„äº§å“éƒ½ç”±åŒä¸€ä¸ªå·¥å‚åˆ›å»ºï¼Œå·¥å‚ç±»èŒè´£è¾ƒé‡ï¼Œä¸šåŠ¡é€»è¾‘è¾ƒä¸ºå¤æ‚ï¼Œå…·ä½“äº§å“ä¸å·¥å‚ç±»ä¹‹é—´çš„è€¦åˆåº¦é«˜ï¼Œä¸¥é‡å½±å“äº†ç³»ç»Ÿçš„çµæ´»æ€§å’Œæ‰©å±•æ€§ï¼Œè€Œå·¥å‚æ–¹æ³•æ¨¡å¼åˆ™å¯ä»¥å¾ˆå¥½åœ°è§£å†³è¿™ä¸€é—®é¢˜ã€‚


  åœ¨å·¥å‚æ–¹æ³•æ¨¡å¼ä¸­ï¼Œæˆ‘ä»¬ä¸å†æä¾›ä¸€ä¸ªç»Ÿä¸€çš„å·¥å‚ç±»æ¥åˆ›å»ºæ‰€æœ‰çš„äº§å“å¯¹è±¡ï¼Œè€Œæ˜¯é’ˆå¯¹<mark style="background: #FF5582A6;">ä¸åŒçš„äº§å“æä¾›ä¸åŒçš„å·¥å‚</mark>ï¼Œç³»ç»Ÿæä¾›ä¸€ä¸ªä¸äº§å“ç­‰çº§ç»“æ„å¯¹åº”çš„å·¥å‚ç­‰çº§ç»“æ„


- å®šä¹‰

  > å®šä¹‰ä¸€ä¸ªç”¨äºåˆ›å»ºå¯¹è±¡çš„æ¥å£ï¼Œè®©å­ç±»å†³å®šå®ä¾‹åŒ–å“ªä¸€ä¸ªç±»ï¼ˆç±»çš„å®ä¾‹åŒ–å»¶è¿Ÿåˆ°å­ç±»ï¼‰

- è§’è‰²

  - **Productï¼ˆæŠ½è±¡äº§å“ï¼‰ï¼š**å®ƒæ˜¯å®šä¹‰äº§å“çš„æ¥å£ï¼Œæ˜¯å·¥å‚æ–¹æ³•æ¨¡å¼æ‰€åˆ›å»ºå¯¹è±¡çš„è¶…ç±»å‹ï¼Œä¹Ÿå°±æ˜¯äº§å“å¯¹è±¡çš„å…¬å…±çˆ¶ç±»
  - **ConcreteProductï¼ˆå…·ä½“äº§å“ï¼‰ï¼š**å®ƒå®ç°äº†æŠ½è±¡äº§å“æ¥å£ï¼ŒæŸç§ç±»å‹çš„å…·ä½“äº§å“ç”±ä¸“é—¨çš„å…·ä½“å·¥å‚åˆ›å»ºï¼Œå…·ä½“å·¥å‚å’Œå…·ä½“äº§å“ä¹‹é—´ä¸€ä¸€å¯¹åº”
  - **Factoryï¼ˆæŠ½è±¡å·¥å‚ï¼‰ï¼š**åœ¨æŠ½è±¡å·¥å‚ç±»ä¸­ï¼Œå£°æ˜äº†å·¥å‚æ–¹æ³•(Factory Method)ï¼Œç”¨äºè¿”å›ä¸€ä¸ªäº§å“ã€‚æŠ½è±¡å·¥å‚æ˜¯å·¥å‚æ–¹æ³•æ¨¡å¼çš„æ ¸å¿ƒï¼Œæ‰€æœ‰åˆ›å»ºå¯¹è±¡çš„å·¥å‚ç±»éƒ½å¿…é¡»å®ç°è¯¥æ¥å£
  - **ConcreteFactoryï¼ˆå…·ä½“å·¥å‚ï¼‰ï¼š**å®ƒæ˜¯æŠ½è±¡å·¥å‚ç±»çš„å­ç±»ï¼Œå®ç°äº†æŠ½è±¡å·¥å‚ä¸­å®šä¹‰çš„å·¥å‚æ–¹æ³•ï¼Œå¹¶å¯ç”±å®¢æˆ·ç«¯è°ƒç”¨ï¼Œè¿”å›ä¸€ä¸ªå…·ä½“äº§å“ç±»çš„å®ä¾‹

- ç±»å›¾

  ![](https://raw.githubusercontent.com/guchaolong/guchaolong.github.io/master/_posts_img/design_pattern/1590594224822.png)





### 4ã€æŠ½è±¡å·¥å‚

- æ¦‚è¿°

  å·¥å‚æ–¹æ³•æ¨¡å¼é€šè¿‡å¼•å…¥å·¥å‚ç­‰çº§ç»“æ„ï¼Œè§£å†³äº†ç®€å•å·¥å‚æ¨¡å¼ä¸­å·¥å‚ç±»èŒè´£å¤ªé‡çš„é—®é¢˜ï¼Œä½†ç”±äºå·¥å‚æ–¹æ³•æ¨¡å¼ä¸­çš„æ¯ä¸ªå·¥å‚åªç”Ÿäº§ä¸€ç±»äº§å“ï¼Œå¯èƒ½ä¼šå¯¼è‡´ç³»ç»Ÿä¸­å­˜åœ¨å¤§é‡çš„å·¥å‚ç±»ï¼ŒåŠ¿å¿…ä¼šå¢åŠ ç³»ç»Ÿçš„å¼€é”€ã€‚æ­¤æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥è€ƒè™‘**å°†ä¸€äº›ç›¸å…³çš„äº§å“ç»„æˆä¸€ä¸ªâ€œäº§å“æ—â€ï¼Œç”±åŒä¸€ä¸ªå·¥å‚æ¥ç»Ÿä¸€ç”Ÿäº§**ï¼Œä¾‹å¦‚ï¼Œæ•°æ®åº“æ“ä½œï¼Œéœ€è¦è·å¾—Connectionã€Statement...å¯¹è±¡ï¼Œæ•°æ®åº“æœ‰MySQLã€Oracleç­‰å¤šç§ï¼Œå¯ä»¥å®šä¹‰MySQLçš„å·¥å‚å¯ä»¥ç”Ÿäº§MySQLçš„Connectionã€Statementå¯¹è±¡ï¼ŒOracleå·¥å‚ç”Ÿäº§Oracleçš„Connectionã€Statementå¯¹è±¡

- è§’è‰²

  - **AbstractFactoryï¼ˆæŠ½è±¡å·¥å‚ï¼‰ï¼š**å®ƒå£°æ˜äº†ä¸€ç»„ç”¨äºåˆ›å»ºä¸€æ—äº§å“çš„æ–¹æ³•ï¼Œæ¯ä¸€ä¸ªæ–¹æ³•å¯¹åº”ä¸€ç§äº§å“
  - **ConcreteFactoryï¼ˆå…·ä½“å·¥å‚ï¼‰ï¼š**å®ƒå®ç°äº†åœ¨æŠ½è±¡å·¥å‚ä¸­å£°æ˜çš„åˆ›å»ºäº§å“çš„æ–¹æ³•ï¼Œç”Ÿæˆä¸€ç»„å…·ä½“äº§å“ï¼Œè¿™äº›äº§å“æ„æˆäº†ä¸€ä¸ªäº§å“æ—ï¼Œæ¯ä¸€ä¸ªäº§å“éƒ½ä½äºæŸä¸ªäº§å“ç­‰çº§ç»“æ„ä¸­
  - **AbstractProductï¼ˆæŠ½è±¡äº§å“ï¼‰ï¼š**å®ƒä¸ºæ¯ç§äº§å“å£°æ˜æ¥å£ï¼Œåœ¨æŠ½è±¡äº§å“ä¸­å£°æ˜äº†äº§å“æ‰€å…·æœ‰çš„ä¸šåŠ¡æ–¹æ³•
  - **ConcreteProductï¼ˆå…·ä½“äº§å“ï¼‰ï¼š**å®ƒå®šä¹‰å…·ä½“å·¥å‚ç”Ÿäº§çš„å…·ä½“äº§å“å¯¹è±¡ï¼Œå®ç°æŠ½è±¡äº§å“æ¥å£ä¸­å£°æ˜çš„ä¸šåŠ¡æ–¹æ³•

- ç±»å›¾

  ![](https://raw.githubusercontent.com/guchaolong/guchaolong.github.io/master/_posts_img/design_pattern/1590595464496.png)

- ä¾‹å­

  ```java
  /**
   * æŠ½è±¡äº§å“
   */
  public interface Connection {
      void connection();
  }
  
  /**
   * æŠ½è±¡äº§å“
   */
  public interface Statement {
      void statement();
  }
  
  /**
   * æŠ½è±¡å·¥å‚
   */
  public interface ConnectionAndStatementFactory {
      Connection getCon();
  
      Statement getSta();
  }
  
  /**
   * å…·ä½“äº§å“
   */
  public class MysqlConnection implements Connection {
      @Override
      public void connection() {
          System.out.println("MySQL connection");
      }
  }
  /**
   * å…·ä½“äº§å“
   */
  public class MysqlStatement implements Statement {
      @Override
      public void statement() {
          System.out.println("MySQL statement");
      }
  }
  
  /**
   * å…·ä½“äº§å“
   */
  public class OracleConnection implements Connection {
      @Override
      public void connection() {
          System.out.println("Oracle connection");
      }
  }
  
  /**
   * å…·ä½“äº§å“
   */
  public class OracleStatement implements Statement {
      @Override
      public void statement() {
          System.out.println("Oracle statement");
      }
  }
  
  /**
   * å…·ä½“å·¥å‚
   */
  public class MysqlFactory implements ConnectionAndStatementFactory {
      @Override
      public Connection getCon() {
          return new MysqlConnection();
      }
  
      @Override
      public Statement getSta() {
          return new MysqlStatement();
      }
  }
  
  /**
   * å…·ä½“å·¥å‚
   */
  public class OracleFactory implements ConnectionAndStatementFactory {
      @Override
      public Connection getCon() {
          return new OracleConnection();
      }
  
      @Override
      public Statement getSta() {
          return new OracleStatement();
      }
  }
  
  /**
   * è°ƒç”¨æ–¹
   */
  public class Client {
      public static void main(String[] args) {
          //è¿æ¥æ•°æ®åº“ï¼Œéœ€è¦connection statement,æˆ‘ä¸å…³å¿ƒæ€ä¹ˆäº§ç”Ÿï¼Œç»™æˆ‘æˆ‘éœ€è¦çš„å°±è¡Œ
          ConnectionAndStatementFactory factory = new OracleFactory();//ç»™ä½ ä¸€ä¸ªå·¥å‚ï¼ˆConnectionAndStatementFactoryé‡Œå®šä¹‰äº†ç›¸å…³æ–¹æ³•ï¼‰
          Connection con = factory.getCon();//é€šè¿‡å·¥å‚ç»™ä½ ä¸€ä¸ªconnection
          Statement sta = factory.getSta();//é€šè¿‡å·¥å‚ç»™ä½ ä¸€ä¸ªstatement
          con.connection();//Oracle connection
          sta.statement();//Oracle statement
      }
  }
  
  ```



### 5ã€å»ºé€ è€…

- å®šä¹‰

  å°†ä¸€ä¸ªå¤æ‚å¯¹è±¡çš„æ„å»ºä¸å…¶è¡¨ç¤ºåˆ†ç¦»ï¼Œä½¿å¾—åŒæ ·çš„æ„å»ºè¿‡ç¨‹å¯ä»¥åˆ›å»ºä¸åŒçš„è¡¨ç¤º

- åœºæ™¯

  - æ„é€ å‡½æ•°çš„å‚æ•°è¶…è¿‡**4ä¸ª**ï¼Œä¸”æœ‰äº›å‚æ•°å¯é€‰

    è¿™ç§æƒ…å†µé€šå¸¸ä¼šé€šè¿‡**æŠ˜å æ„é€ å‡½æ•°æ¨¡å¼**ã€æˆ–è€…**javabean**æ¨¡å¼è§£å†³

    ```java
    /**
    
    - åœ¨è¿™ç§æ¨¡å¼ä¸‹ï¼Œç¨‹åºå‘˜ä¼šå…ˆæä¾›ä¸€ä¸ªåªæœ‰å¿…è¦å‚æ•°çš„æ„é€ å™¨ï¼Œç„¶ååœ¨è¿™ä¸ªæ„é€ å™¨çš„åŸºç¡€ä¸Šï¼Œæä¾›ä¸€ä¸ªè¿˜è¦éœ€è¦æœ‰ä¸€ä¸ªå¯é€‰å‚æ•°çš„æ„é€ å™¨ï¼Œæ¥ç€æä¾›ä¸€ä¸ªéœ€è¦æœ‰ä¸¤ä¸ªå¯é€‰å‚æ•°çš„æ„é€ å™¨ï¼Œä»¥æ­¤ç±»æ¨ï¼Œç»ˆäºåœ¨æœ€åä¸€ä¸ªæ„é€ å™¨çš„å‚æ•°åˆ—è¡¨é‡Œï¼Œä¸ä»…åŒ…å«äº†é‚£å‡ ä¸ªå¿…è¦çš„å‚æ•°ï¼Œè¿˜åŒ…å«äº†æ‰€æœ‰çš„å¯é€‰å‚æ•°ã€‚ä¸‹é¢æœ‰ä¸ªä¾‹å­ã€‚ä¸ºäº†ç®€å•èµ·è§ï¼Œå®ƒåªæ˜¾ç¤º4ä¸ªå¯é€‰å±æ€§ï¼š
      */
    
    // Telescoping constructor pattern - does not scale well!
    public class NutritionFacts {
        private final int servingSize; // (mL) required 
        private final int servings;    // (per container) required
        private final int calories;    // (per serving) optional    
        private final int fat;         // (g/serving) optional
        private final int sodium;      // (mg/serving) optional
        private final int carbohydrate; // (g/serving) optional
        public NutritionFacts(int servingSize, int servings) { 
            this(servingSize, servings, 0);
        }
        public NutritionFacts(int servingSize, int servings, int calories) {
            this(servingSize, servings, calories, 0); 
        }
        public NutritionFacts(int servingSize, int servings, int calories, int fat) {
            this(servingSize, servings, calories, fat, 0); 
        }
        public NutritionFacts(int servingSize, int servings, int calories, int fat, int sodium) {
            this(servingSize, servings, calories, fat, sodium, 0); 
        }
        public NutritionFacts(int servingSize, int servings, int calories, int fat, int sodium, 
            int carbohydrate) {
            this.servingSize = servingSize; this.servings = servings;
            this.calories = calories
            this.fat = fat
            this.sodium = sodium
            this.carbohydrate = carbohydrate;
        } 
    }
    
    //javabeanæ¨¡å¼ï¼Œé€šè¿‡get/setæ–¹æ³•ï¼Œå…ˆè°ƒç”¨é»˜è®¤çš„æ„é€ æ–¹æ³•ï¼Œåœ¨set
    public class Computer {
            ...
    
        public String getCpu() {
            return cpu;
        }
        public void setCpu(String cpu) {
            this.cpu = cpu;
        }
        public String getRam() {
            return ram;
        }
        public void setRam(String ram) {
            this.ram = ram;
        }
        public int getUsbCount() {
            return usbCount;
        }
    ...
    }
    ```

- Builderæ¨¡å¼ä¸¤ç§å†™æ³•

  ```java
  public class Computer {
      private final String cpu;//å¿…é¡»
      private final String ram;//å¿…é¡»
      private final int usbCount;//å¯é€‰
      private final String keyboard;//å¯é€‰
      private final String display;//å¯é€‰
  
      //2ã€ç§æœ‰åŒ–é€ å‡½æ•°ï¼Œå‚æ•°ä¸ºBuilderç±»å‹
      private Computer(Builder builder) {
          this.cpu = builder.cpu;
          this.ram = builder.ram;
          this.usbCount = builder.usbCount;
          this.keyboard = builder.keyboard;
          this.display = builder.display;
      }
  
      //1ã€é™æ€å†…éƒ¨ç±» Builderï¼Œç„¶åå°†Computer ä¸­çš„å‚æ•°éƒ½å¤åˆ¶åˆ°Builderç±»ä¸­
      public static class Builder {
          private String cpu;//å¿…é¡»
          private String ram;//å¿…é¡»
          private int usbCount;//å¯é€‰
          private String keyboard;//å¯é€‰
          private String display;//å¯é€‰
  
          //3ã€Builderçš„æ„é€ å‡½æ•°ï¼Œå‚æ•°ä¸ºComputerä¸­å¿…å¡«çš„é‚£äº›å‚æ•°ï¼Œcpu å’Œram
          public Builder(String cup, String ram) {
              this.cpu = cup;
              this.ram = ram;
          }
  
          //4ã€è®¾ç½®å‡½æ•°ï¼Œå¯¹Computerä¸­é‚£äº›å¯é€‰å‚æ•°è¿›è¡Œèµ‹å€¼ï¼Œè¿”å›å€¼ä¸ºBuilderç±»å‹çš„å®ä¾‹
          public Builder setUsbCount(int usbCount) {
              this.usbCount = usbCount;
              return this;
          }
  
          public Builder setKeyboard(String keyboard) {
              this.keyboard = keyboard;
              return this;
          }
  
          public Builder setDisplay(String display) {
              this.display = display;
              return this;
          }
  
          //5ã€build()æ–¹æ³•ï¼Œè°ƒç”¨ç§æœ‰æ„é€ æ–¹æ³•ï¼Œåœ¨å…¶ä¸­æ„å»ºComputerçš„å®ä¾‹å¹¶è¿”å›
          public Computer build() {
              return new Computer(this);
          }
      }
  }
  ```

  ```java
  public class Computer2 {
      private String cpu;//å¿…é¡»
      private String ram;//å¿…é¡»
      private int usbCount;//å¯é€‰
      private String keyboard;//å¯é€‰
      private String display;//å¯é€‰
  
      //2ã€ç§æœ‰åŒ–é€ å‡½æ•°ï¼Œåªæœ‰å†…éƒ¨ç±»æ‰èƒ½è°ƒç”¨
      private Computer2() {
      }
  
      //1ã€é™æ€å†…éƒ¨ç±» Builderï¼Œç„¶åå°†Computer ä¸­çš„å‚æ•°éƒ½å¤åˆ¶åˆ°Builderç±»ä¸­
      public static class Builder {
          //3ã€æŒæœ‰ä¸€ä¸ªå¤–éƒ¨ç±»çš„å±æ€§ï¼Œè°ƒç”¨å¤–éƒ¨ç±»æ„é€ å‡½æ•°
          Computer2 computer2 = new Computer2();
  
          //4ã€è®¾ç½®å‡½æ•°ï¼Œå¯¹Computerä¸­é‚£äº›å¯é€‰å‚æ•°è¿›è¡Œèµ‹å€¼ï¼Œè¿”å›å€¼ä¸ºBuilderç±»å‹çš„å®ä¾‹
          public Builder setCpu(String cpu) {
              computer2.cpu = cpu;
              return this;
          }
  
          public Builder setRam(String ram) {
              computer2.ram = ram;
              return this;
          }
  
          public Builder setUsbCount(int usbCount) {
              computer2.usbCount = usbCount;
              return this;
          }
  
          public Builder setKeyboard(String keyboard) {
              computer2.keyboard = keyboard;
              return this;
          }
  
          public Builder setDisplay(String display) {
              computer2.display = display;
              return this;
          }
  
          //5ã€build()æ–¹æ³•
          public Computer2 build() {
              return computer2;
          }
      }
  }
  ```


## ç»“æ„å‹

### 1ã€é€‚é…å™¨

- å®šä¹‰

  å°†<mark style="background: #FF5582A6;">ä¸€ä¸ªæ¥å£</mark>è½¬æ¢æˆ<mark style="background: #FF5582A6;">å®¢æˆ·å¸Œæœ›</mark>çš„å¦ä¸€ä¸ªæ¥å£ï¼Œä½¿<mark style="background: #FF5582A6;">æ¥å£</mark><mark style="background: #FF5582A6;">ä¸å…¼å®¹</mark>çš„é‚£äº›<mark style="background: #FF5582A6;">ç±»</mark>å¯ä»¥ä¸€èµ·å·¥ä½œï¼Œåˆ«ååŒ…è£…å™¨ï¼ˆWrapper)

- ç±»å›¾

  æœ‰ä¸¤ç§ï¼Œ<mark style="background: #FF5582A6;">ç±»çš„é€‚é…å™¨æ¨¡å¼ï¼ˆä½¿ç”¨ç»§æ‰¿ï¼‰ã€å¯¹è±¡çš„é€‚é…å™¨æ¨¡å¼ï¼ˆä½¿ç”¨ç»„åˆï¼‰</mark>
  åŒºåˆ«ï¼šå¦‚æœæ˜¯ç»§æ‰¿æ–¹å¼ï¼ŒAdapter adapter = new Adapterä¹‹åï¼Œadapteræ—¢å¯ä»¥è°ƒç”¨å®ç°äº†çš„request()æ–¹æ³•ï¼Œä¹Ÿå¯ä»¥è°ƒç”¨ç»§æ‰¿æ¥çš„specificRequest()æ–¹æ³•ï¼Œä½†æ˜¯åœ¨Adapterä¸­specificRequest()æ˜¯ä¸åº”è¯¥å‡ºç°çš„ï¼Œæ ¹æ®è¿ªç±³ç‰¹æ³•åˆ™ï¼Œè¶Šå°‘çŸ¥é“è¶Šå¥½ï¼›ä½¿ç”¨ç»„åˆï¼Œadapterå¯¹è±¡å°±åªèƒ½è°ƒå®ç°äº†çš„request()

  ![](https://raw.githubusercontent.com/guchaolong/guchaolong.github.io/master/_posts_img/design_pattern/1590935541531.png)

  ![](https://raw.githubusercontent.com/guchaolong/guchaolong.github.io/master/_posts_img/design_pattern/1590935584590.png)

  - ç›®æ ‡æ¥å£ï¼ˆTargetï¼‰:å®¢æˆ·æ‰€æœŸå¾…çš„æ¥å£ã€‚ç›®æ ‡å¯ä»¥æ˜¯å…·ä½“çš„æˆ–æŠ½è±¡çš„ç±»ï¼Œä¹Ÿå¯ä»¥æ˜¯æ¥å£
  - éœ€è¦é€‚é…çš„ç±»ï¼ˆAdapteeï¼‰:éœ€è¦é€‚é…çš„ç±»
  - é€‚é…å™¨ï¼ˆAdapterï¼‰:é€šè¿‡åŒ…è£…ä¸€ä¸ªéœ€è¦é€‚é…çš„å¯¹è±¡ï¼ŒæŠŠåŸæ¥å£è½¬æ¢æˆç›®æ ‡æ¥å£

- ä½¿ç”¨

  - SpringMVCä¸­çš„DispatcherServlet

    ä¸åŒçš„è¯·æ±‚ä¼šåˆ†å‘ç»™ä¸åŒçš„Handler,å¦‚HttpRequestHandlerã€Servletã€Controller

    å…¶ä¸­HttpRequestHandlerå¤„ç†è¯·æ±‚çš„æ–¹æ³•æ˜¯handleRequest(request, response)

    Servletå¤„ç†è¯·æ±‚çš„æ–¹æ³•æ˜¯service(request, response)

    Controllerå¤„ç†è¯·æ±‚çš„æ–¹æ³•æ˜¯handleRequest(request, response)

    æ‰€ä»¥DispatcherServletè·å–åˆ°å…·ä½“çš„Handleræ—¶ï¼Œå¦‚æœæ²¡æœ‰é€‚é…å™¨ï¼Œå°±åªèƒ½åˆ¤æ–­ç±»å‹ï¼Œif-else

    æœ‰äº†é€‚é…å™¨ï¼ŒæŠŠå…·ä½“çš„å¤„ç†å™¨é€‚é…æˆHandlerAdapterï¼Œéƒ½ä»¥handle(request, response, handler)çš„æ–¹å¼è°ƒç”¨ï¼Œä»¥ä¸Šå¤„ç†å™¨çš„é€‚é…å™¨åˆ†åˆ«å¯¹åº”HttpRequestHandlerAdapterã€SimpleServletHandlerAdapterã€SimpleControllerHandlerAdapterï¼Œå®ƒä»¬ä¸‰ä¸ªéƒ½å®ç°äº†HandlerAdapterï¼Œ**è¿™é‡Œçš„HandlerAdapterå…¶å®å°±æ˜¯ç±»å›¾ä¸­çš„Target**

### 2ã€æ¡¥æ¥

> <mark style="background: #FF5582A6;">ä¸€ä¸ªå¯¹è±¡</mark>å­˜åœ¨<mark style="background: #FF5582A6;">å¤šä¸ªç»´åº¦</mark>åœ¨<mark style="background: #FF5582A6;">å˜åŒ–</mark>

- æ¦‚è¿°

  <mark style="background: #FF5582A6;">æ‰‹æœº</mark>ï¼ŒæŒ‰<mark style="background: #FF5582A6;">å“ç‰Œ</mark>ï¼Œæœ‰åä¸ºã€å°ç±³ã€OPPOã€vivoç­‰

  æŒ‰<mark style="background: #FF5582A6;">å†…å­˜</mark>ï¼Œæœ‰16G 32G 64G

  è¿™é‡Œå¦‚æœæ¯ç§æ‰‹æœºéƒ½æœ‰ä¸€ä¸ªå®ç°ï¼Œå°±éœ€è¦4 * 3 = 12ä¸ªå…·ä½“ç±»ï¼Œå†µä¸”è¿™ä¸¤ä¸ªç»´åº¦åœ¨å˜åŒ–çš„ï¼Œæ¡¥æ¥æ¨¡å¼å°±æ˜¯æŠŠè¿™ä¸¤ä¸ªç»´åº¦åˆ†ç¦»å¼€æ¥ï¼Œæ¯ä¸ªç»´åº¦éƒ½å¯ä»¥ç‹¬ç«‹æ‰©å±•

- å®šä¹‰

  å°†æŠ½è±¡éƒ¨åˆ†ä¸å®ƒçš„å®ç°éƒ¨åˆ†åˆ†ç¦»ï¼Œæ˜¯ä»–ä»¬éƒ½å¯ä»¥ç‹¬ç«‹å˜åŒ–

- è¯´æ˜

  ä»¥ä¸Šé¢æ‰‹æœºçš„ä¾‹å­ï¼ŒæŠ½è±¡éƒ¨åˆ†å°±æ˜¯å“ç‰Œï¼Œå®ç°éƒ¨åˆ†æ˜¯å†…å­˜

- ç±»å›¾

  ![](https://raw.githubusercontent.com/guchaolong/guchaolong.github.io/master/_posts_img/design_pattern/1591111902502.png)

- è§’è‰²

  -  **Abstraction**ï¼šæŠ½è±¡ç±»ï¼Œèšåˆäº†ä¸€ä¸ªImplementor,å¯ä»¥åŒ…å«æŠ½è±¡æˆ–å…·ä½“çš„ä¸šåŠ¡æ–¹æ³•
  -  **RefinedAbstraction**ï¼šæ‰©å……æŠ½è±¡ç±»ï¼Œå®ç°äº†Abstractionä¸­çš„æŠ½è±¡æ–¹æ³•ï¼Œä¹Ÿå¯è°ƒç”¨implementorä¸­çš„æ–¹æ³•
  -  **Implementor**ï¼šå®ç°ç±»æ¥å£
  -  **ConcreteImplementor**ï¼šå…·ä½“å®ç°ç±»

- ä»£ç 

  ```java
  /**
   * ç¬¬ä¸€æ­¥ï¼šå®šä¹‰Implementorï¼Œè¿™é‡Œå®šä¹‰æ‰‹æœºå†…å­˜æ¥å£
   * æŠ½è±¡éƒ¨åˆ†-å†…å­˜
   */
  public interface Memory {
      void addMemory();
  }
  
  /**
   * ç¬¬äºŒæ­¥ï¼šå®šä¹‰ConcreteImplementorï¼Œè¿™é‡ŒæŒ‡å…·ä½“çš„å†…å­˜
   * å®ç°éƒ¨åˆ†-16G
   */
  public class Memory16G implements Memory {
      @Override
      public void addMemory() {
          System.out.println("æ‰‹æœºå®‰è£…16Gå†…å­˜");
      }
  }
  
  public class Memory32G implements Memory {
      @Override
      public void addMemory() {
          System.out.println("æ‰‹æœºå®‰è£…äº†32Gå†…å­˜");
      }
  }
  
  /**
   * ç¬¬ä¸‰æ­¥ï¼šå®šä¹‰Abstractionæ‰‹æœºæŠ½è±¡ç±»
   */
  public abstract class Phone {
      //ä½¿ç”¨èšåˆçš„æ–¹å¼ï¼ŒæŠŠå†…å­˜éƒ¨åˆ†åŒ…å«è¿›æ¥
      Memory memory;
  
      public Memory getMemory() {
          return memory;
      }
  
      public void setMemory(Memory memory) {
          this.memory = memory;
      }
  
      abstract void buyPhone();
  }
  
  /**
   * ç¬¬å››æ­¥ï¼šå®šä¹‰Refined Abstractionï¼ˆå…·ä½“çš„æ‰‹æœºå“ç‰Œï¼‰
   */
  public class HuaWei extends Phone {
      @Override
      void buyPhone() {
          memory.addMemory();
          System.out.println("è´­ä¹°äº†åä¸ºæ‰‹æœºï¼Œå†…å­˜ä¸º" + getMemory());
      }
  }
  
  public class OPPO extends Phone {
      @Override
      void buyPhone() {
          memory.addMemory();
          System.out.println("è´­ä¹°äº†OPPOæ‰‹æœºï¼Œå†…å­˜ä¸º" + getMemory());
      }
  }
  
  /**
   * ä½¿ç”¨
   */
  public class Client {
      public static void main(String[] args) {
          Memory memory = new Memory32G();
          Phone phone = new HuaWei();
          phone.setMemory(memory);
          phone.buyPhone();
      }
  }
  ```

  ![](https://raw.githubusercontent.com/guchaolong/guchaolong.github.io/master/_posts_img/design_pattern/1591113820370.png)

### 3ã€ç»„åˆ

> é‡åˆ°<mark style="background: #FF5582A6;">æ ‘å½¢ç»“æ„</mark>å°±åº”è¯¥æƒ³åˆ°ç”¨ç»„åˆæ¨¡å¼è§£å†³

- å¼•å…¥

  æ•´ä½“-éƒ¨åˆ†ï¼šå¦‚è¡£æŸœ-è¡£æœã€æ–‡ä»¶å¤¹-æ–‡ä»¶

  æŠ½è±¡æ„ä»¶ï¼šä¸€ä¸ªæŠ½è±¡ï¼Œå®¹å™¨å’Œå¶å­çš„å…±åŒçˆ¶ç±»

  å®¹å™¨æ„ä»¶ï¼šå…·æœ‰â€œå®¹å™¨â€ç‰¹å¾çš„å¯¹è±¡ï¼Œå……å½“æ™®é€šå¯¹è±¡çš„åŒæ—¶ï¼Œåˆå¯ä»¥ä½œä¸ºå…¶ä»–å¯¹è±¡çš„å®¹å™¨ï¼ˆå¦‚æ–‡ä»¶å¤¹ï¼‰

  å¶å­æ„å»ºï¼šåªèƒ½å……å½“æ™®é€šå¯¹è±¡ï¼ˆå¦‚æ–‡ä»¶ï¼‰

  å­æ„ä»¶ï¼šå®¹å™¨å¯¹è±¡Aä¸­,åŒ…å«äº†å¦ä¸€ä¸ªå®¹å™¨å¯¹è±¡Bï¼Œä¸€çº§ä¸€ä¸ªå¶å­å¯¹è±¡Cï¼Œé‚£ä¹ˆBå’ŒCéƒ½ç§°ä¸ºAçš„å­æ„ä»¶

  > å®¢æˆ·ç«¯åœ¨ä½¿ç”¨è¿™ç§æ ‘å½¢ç»“æ„æ—¶ï¼Œå¸Œæœ›ä¸€è‡´çš„å¤„ç†ä»–ä»¬ï¼Œå› ä¸ºå¦‚æœæŠŠå®¹å™¨å¯¹è±¡å’Œå¶å­å¯¹è±¡åŒºåˆ«å¯¹å¾…ï¼Œç¨‹åºå°†ä¼šéå¸¸å¤æ‚
  >
  > ä¸ºäº†å¤„ç†æ—¶å…·æœ‰ä¸€è‡´æ€§ï¼Œé€šå¸¸åœ¨æŠ½è±¡æ„ä»¶ä¸­å®šä¹‰äº†å…±æœ‰ä¸šåŠ¡æ–¹æ³•ï¼Œå¦å¤–ç”¨äºè®¿é—®å­æ„ä»¶çš„æ–¹æ³•ï¼Œå¦‚ï¼šadd(),remove(),getChild()ç­‰æ–¹æ³•ï¼Œå¯ä»¥åœ¨æŠ½è±¡æ„ä»¶ä¸­å®šä¹‰ï¼Œä¹Ÿå¯ä»¥åœ¨å®¹å™¨æ„ä»¶ä¸­å®šä¹‰ï¼Œäºæ˜¯å°±æœ‰äº†é€æ˜ç»„åˆæ¨¡å¼å’Œå®‰å…¨ç»„åˆæ¨¡å¼

- å®šä¹‰

  ç»„åˆå¤šä¸ªå¯¹è±¡å½¢æˆæ ‘å½¢ç»“æ„ä»¥è¡¨ç¤ºâ€œæ•´ä½“-éƒ¨åˆ†â€çš„ç»“æ„å±‚æ¬¡ï¼Œç»„åˆæ¨¡å¼å¯¹å¶å­å¯¹è±¡å’Œå®¹å™¨å¯¹è±¡çš„ä½¿ç”¨å…·æœ‰ä¸€è‡´æ€§

  > å…·æœ‰ä¸€è‡´æ€§ä¹‹åï¼Œå®¢æˆ·ç«¯å¤„ç†æ—¶æ— éœ€å…³å¿ƒè‡ªå·±å¤„ç†çš„æ˜¯å®¹å™¨å¯¹è±¡è¿˜æ˜¯å¶å­ å¯¹è±¡ï¼Œç®€åŒ–äº†å®¢æˆ·ç«¯ä»£ç 

  æ ¸å¿ƒï¼šå¼•å…¥ ä¸€ä¸ªæŠ½è±¡Componentï¼Œå®ƒæ—¢æ˜¯å®¹å™¨ç±»ï¼ˆComposite)çš„çˆ¶ç±»ï¼Œä¹Ÿæ˜¯å¶å­ç±»ï¼ˆLeafï¼‰çš„çˆ¶ç±»

- é€æ˜ç»„åˆæ¨¡å¼

  > æŠ½è±¡æ„ä»¶ä¸­å£°æ˜äº†æ‰€æœ‰ç”¨äºç®¡ç†æˆå‘˜å¯¹è±¡çš„æ–¹æ³•ï¼ŒåŒ…æ‹¬addã€remove()ã€getChild()ç­‰æ–¹æ³•ï¼Œ
  >
  > å¥½å¤„æ˜¯ï¼šç¡®ä¿æ‰€æœ‰çš„æ„ä»¶ç±»éƒ½æœ‰ç›¸åŒçš„æ¥å£ï¼Œåœ¨å®¢æˆ·ç«¯çœ‹æ¥ï¼Œå¶å­æ„ä»¶å’Œå®¹å™¨æ„ä»¶æ‰€æä¾›çš„æ–¹æ³•æ˜¯ä¸€è‡´çš„ï¼Œå¯ä»¥ç›¸åŒå¯¹å¾…
  >
  > ç¼ºç‚¹æ˜¯ï¼šä¸å¤Ÿå®‰å…¨ï¼Œå¶å­å’Œå®¹å™¨æœ¬è´¨ä¸Šæ˜¯æœ‰åŒºåˆ«çš„ï¼Œå¶å­å¯¹è±¡é‡Œä¸å¯èƒ½å†æœ‰ä¸‹ä¸€å±‚å¯¹è±¡ï¼Œå› æ­¤add()ç­‰æ–¹æ³•æ˜¯æ²¡æœ‰æ„ä¹‰çš„ï¼Œç¼–è¯‘ä¸é”™ä½†è¿è¡Œæ—¶å¯èƒ½å‡ºé”™

  ![](https://raw.githubusercontent.com/guchaolong/guchaolong.github.io/master/_posts_img/design_pattern/1591200116053.png)

  ```java
  /**
   * æŠ½è±¡æ„ä»¶
   * é€æ˜ç»„åˆæ¨¡å¼ æŠ½è±¡æ„ä»¶ä¸­å®šä¹‰äº†æ‰€æœ‰æ–¹æ³•ï¼ŒåŒ…æ‹¬æ“ä½œå­æ„ä»¶çš„æ–¹æ³•
   */
  public abstract class Component {
      //å…±æœ‰çš„ä¸šåŠ¡é€»è¾‘æ–¹æ³•
      public abstract void operation();
  
      //æ·»åŠ å­æ„ä»¶
      public abstract void add(Component c);
  
      //ç§»é™¤å­æ„ä»¶
      public abstract void remove(Component c);
  
      //è·å–å­æ„ä»¶
      public abstract Component getChild(int i);
  }
  
  /**
   * å®¹å™¨æ„ä»¶
   */
  public class Composite extends Component {
  
      //æŒæœ‰ä¸€ä¸ªå…ƒç´ ä¸ºæŠ½è±¡æ„ä»¶çš„list
      private List<Component> child = new ArrayList<>();
  
      //éå†list,å®¢æˆ·ç«¯æ“ä½œä¸€ä¸ªComponentæ—¶ï¼Œä¼šè¿­ä»£è°ƒç”¨
      @Override
      public void operation() {
          for (Component obj : child) {
              obj.operation();
          }
      }
  
      @Override
      public void add(Component c) {
          child.add(c);
      }
  
      @Override
      public void remove(Component c) {
          child.remove(c);
      }
  
      @Override
      public Component getChild(int i) {
          return child.get(i);
      }
  }
  
  
  /**
   * å¶å­ æ„ä»¶
   */
  public class Leaf extends Component {
      @Override
      public void operation() {
          System.out.println("å¶å­æ„ä»¶ä¸šåŠ¡æ–¹æ³•æ‰§è¡Œä¸­...");
      }
  
      @Override
      public void add(Component c) {
          System.out.println("å®é™…å¼€å‘ä¸­ï¼Œè¿™é‡Œè¦è¿›è¡Œå¼‚å¸¸å¤„ç†æˆ–é”™è¯¯æç¤ºï¼Œå¶å­ä¸æ”¯æŒadd");
      }
  
      @Override
      public void remove(Component c) {
          System.out.println("å®é™…å¼€å‘ä¸­ï¼Œè¿™é‡Œè¦è¿›è¡Œå¼‚å¸¸å¤„ç†æˆ–é”™è¯¯æç¤ºï¼Œå¶å­ä¸æ”¯æŒremove");
      }
  
      @Override
      public Component getChild(int i) {
          System.out.println("å®é™…å¼€å‘ä¸­ï¼Œè¿™é‡Œè¦è¿›è¡Œå¼‚å¸¸å¤„ç†æˆ–é”™è¯¯æç¤ºï¼Œå¶å­ä¸æ”¯æŒgetChild");
          return null;
      }
  }
  
  
  /**
   * å®¢æˆ·ç«¯è°ƒç”¨
   */
  public class Client {
      public static void main(String[] args) {
          Component c1, c2, c3, c4;
          Composite s1, s2;
  
          c1 = new Leaf();
          c2 = new Leaf();
          c3 = new Leaf();
          c4 = new Leaf();
  
          s1 = new Composite();
          s2 = new Composite();
  
          s1.add(c1);
          s1.add(c2);
          s2.add(c3);
          s2.add(c4);
          s1.add(s2);
  
          //ä¸€è‡´æ€§ï¼Œs1æ˜¯Componentçš„å­ç±»ï¼Œæ— è®ºå®ƒå…·ä½“æ˜¯ä»€ä¹ˆç±»å‹ï¼Œéƒ½æœ‰å…¬å…±çš„operationæ–¹æ³•
          s1.operation();
      }
  }
  
  ```

- å®‰å…¨ç»„åˆæ¨¡å¼

  > æŠ½è±¡æ„ä»¶ä¸­æ²¡æœ‰å£°æ˜ä»»ä½•ç”¨äºç®¡ç†æˆå‘˜å¯¹è±¡çš„æ–¹æ³•ï¼Œè€Œæ˜¯åœ¨å®¹å™¨æ„ä»¶ä¸­å£°æ˜ï¼Œè¿™ç§åšæ³•æ˜¯å®‰å…¨çš„
  >
  > ç¼ºç‚¹æ˜¯:ä¸å¤Ÿé€æ˜ï¼Œå¶å­å’Œå®¹å™¨å…·æœ‰ä¸åŒçš„æ–¹æ³•ï¼Œæ²¡æœ‰åœ¨æŠ½è±¡æ„ä»¶ä¸­å®šä¹‰ï¼Œæ‰€ä»¥å®¢æˆ·ç«¯ä¸èƒ½å®Œå…¨é’ˆå¯¹æŠ½è±¡ç¼–ç¨‹ï¼Œå¹¶ä¸€è‡´åœ°ä½¿ç”¨å¶å­æ„ä»¶å’Œå®¹å™¨æ„ä»¶

  ![](https://raw.githubusercontent.com/guchaolong/guchaolong.github.io/master/_posts_img/design_pattern/1591200503847.png)

  ```java
  /**
   * æŠ½è±¡æ„ä»¶
   * å®‰å…¨ç»„åˆæ¨¡å¼ï¼šæŠ½è±¡æ„ä»¶ä¸­åªå®šä¹‰å…¬å…±çš„ä¸šåŠ¡æ–¹æ³•ï¼Œ
   * æ“ä½œå­æ„ä»¶çš„addã€removeã€getChildç­‰æ–¹æ³•ç•™åˆ°äº†å®¹å™¨æ„ä»¶ä¸­å®ç°
   */
  public abstract class Component {
      //å…±æœ‰çš„ä¸šåŠ¡é€»è¾‘æ–¹æ³•
      public abstract void operation();
  }
  
  
  /**
   * å®¹å™¨æ„ä»¶
   * å¤„ç†å®ç°å…¬å…±æ–¹æ³•ï¼Œè¿˜å®šä¹‰äº†æ“ä½œå­æ„ä»¶çš„æ–¹æ³•
   */
  public class Composite extends Component {
  
      //æŒæœ‰ä¸€ä¸ªå…ƒç´ ä¸ºæŠ½è±¡æ„ä»¶çš„list
      private List<Component> child = new ArrayList<>();
  
      //éå†list,å®¢æˆ·ç«¯æ“ä½œä¸€ä¸ªComponentæ—¶ï¼Œä¼šè¿­ä»£è°ƒç”¨
      @Override
      public void operation() {
          for (Component obj : child) {
              obj.operation();
          }
      }
  
      public void add(Component c) {
          child.add(c);
      }
  
      public void remove(Component c) {
          child.remove(c);
      }
  
      public Component getChild(int i) {
          return child.get(i);
      }
  }
  
  
  /**
   * å¶å­ æ„ä»¶
   * åªéœ€è¦å®ç°æŠ½è±¡æ„ä»¶ä¸­å®šä¹‰çš„å…¬å…±æ–¹æ³•
   * æœ¬æ¥å¶å­æ„ä»¶å°±ä¸åº”è¯¥åŒ…å«addã€removeç­‰æ“ä½œ
   */
  public class Leaf extends Component {
      @Override
      public void operation() {
          System.out.println("å¶å­æ„ä»¶ä¸šåŠ¡æ–¹æ³•æ‰§è¡Œä¸­...");
      }
  }
  
  //å®¢æˆ·ç«¯è¿˜æ˜¯ä¸€æ ·
  ```

### 4ã€è£…é¥°

> å¢åŠ ä¸€ä¸ªå¯¹è±¡çš„åŠŸèƒ½ï¼Œå¸¸è§çš„å°±æ˜¯ç»§æ‰¿å®ƒï¼Œç„¶ååœ¨å­ç±»ä¸­å¢åŠ æ–¹æ³•ï¼Œä½†æ˜¯è¿™ç§æ–¹æ³•ä¸å…·æœ‰çµæ´»æ€§ï¼Œå®¹æ˜“é€ æˆç±»çˆ†ç‚¸ï¼Œä½¿ç”¨èšåˆçš„æ–¹å¼å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜

- å®šä¹‰

  <mark style="background: #FF5582A6;">åŠ¨æ€åœ°ç»™ä¸€ä¸ªå¯¹è±¡å¢åŠ ä¸€äº›é¢å¤–çš„åŠŸèƒ½</mark>

- ç±»å›¾

  ![](https://raw.githubusercontent.com/guchaolong/guchaolong.github.io/master/_posts_img/design_pattern/1591285802382.png)

- è§’è‰²

  - Component(æŠ½è±¡æ„ä»¶)

    å…·ä½“æ„ä»¶ä¸­å®ç°çš„ä¸šåŠ¡æ–¹æ³•

  - ConcreteComponent(å…·ä½“æ„ä»¶)

    å®ç°äº†æŠ½è±¡æ„ä»¶ä¸­çš„ä¸šåŠ¡æ–¹æ³•ï¼Œè£…é¥°å™¨å¯ä»¥ç»™ä»–å¢åŠ é¢å¤–çš„èŒè´£ï¼ˆæ–¹æ³•ï¼‰

  - Decorator(æŠ½è±¡è£…é¥°ç±»)

    ç»´æŠ¤ä¸€ä¸ªæŠ½è±¡æ„ä»¶ç±»å‹çš„å¼•ç”¨ï¼ˆä½œä¸ºè¢«è£…é¥°çš„æ„ä»¶ï¼‰ï¼Œä¸šåŠ¡æ–¹æ³•å†…è°ƒç”¨è¯¥å¼•ç”¨çš„ä¸šåŠ¡æ–¹æ³•ï¼Œé€šè¿‡å­ç±»æ‰©å±•è¯¥æ–¹æ³•ï¼Œä»¥è¾¾åˆ°è£…é¥°çš„ç›®çš„

  - ConcreteDecoratorï¼ˆå…·ä½“è£…é¥°ç±»ï¼‰

    è´Ÿè´£æ·»åŠ æ–°çš„ èŒè´£

- åˆ—å­

  å˜å½¢é‡‘åˆšï¼Œæœ€åˆæ˜¯æ±½è½¦ï¼Œå¯ä»¥å˜å½¢ï¼ˆè£…é¥°ï¼‰ä¸ºæœºå™¨äººï¼Œå°±æœ‰äº†è¯´è¯çš„åŠŸèƒ½ï¼Œè¿˜å¯ä»¥è£…é¥°æˆé£æœºï¼Œå…·æœ‰é£ç¿”åŠŸèƒ½ï¼Œå› ä¸ºåœ¨ç»“æ„ä¸Šï¼Œè£…é¥°å™¨æ˜¯å¯¹æŠ½è±¡æ„ä»¶è¿›è¡Œè£…é¥°ï¼Œä»–ä»¬é¡¶å±‚æŠ½è±¡éƒ½å±äºæŠ½è±¡æ„ä»¶ï¼Œæ‰€ä»¥ï¼Œè£…é¥°æˆæœºå™¨äººä¹‹åè¿˜å¯ä»¥è£…é¥°æˆé£æœº

  ```java
  /**
   * æŠ½è±¡æ„ä»¶-Component
   * 
   * å˜å½¢é‡‘åˆš
   */
  public interface Transform {
      //å®šä¹‰æœ€åŸºæœ¬çš„æ–¹æ³•ï¼Œæ— è®ºæ€ä¹ˆè£…é¥°ï¼Œè¿™ä¸ªæ–¹æ³•éƒ½ä¼šæœ‰,
      //å³ç±»å›¾ä¸­çš„operatoræ–¹æ³•
      public void move();
  }
  
  
  /**
   * å…·ä½“æ„ä»¶ç±»-ConcreteComponent
   * è¢«è£…é¥°çš„æœ€åˆçš„å¯¹è±¡
   */
  public class Car implements Transform {
      public Car() {
          System.out.println("åŸå§‹å¯¹è±¡ï¼šä¸€è¾†æ±½è½¦");
      }
  
      @Override
      public void move() {
          System.out.println("æœ€åˆå¯¹è±¡ï¼šåªæ˜¯ä¸€è¾†è½¦å­ï¼Œåœ¨åœ°ä¸Šç§»åŠ¨");
      }
  }
  
  
  /**
   * æŠ½è±¡è£…é¥°å™¨ç±»-Decorator
   */
  public class Changer implements Transform {
      //èšåˆï¼Œç»´æŠ¤ä¸€ä¸ªæŒ‡å‘æŠ½è±¡æ„ä»¶ç±»å‹çš„å¼•ç”¨ï¼ˆè¦è¢«è£…é¥°çš„å¯¹è±¡ï¼‰
      private Transform transform;
  
      //æ„é€ æ–¹æ³•
      public Changer(Transform transform) {
          this.transform = transform;
      }
  
      @Override
      public void move() {
          transform.move();//å¹¶æœªçœŸæ­£å®ç°ï¼Œè€Œæ˜¯è°ƒç”¨è¢«è£…é¥°å¯¹è±¡çš„æ–¹æ³•
      }
  }
  
  
  /**
   * å…·ä½“è£…é¥°ç±»-ConcreteDecoratorA
   * è£…é¥°æˆæœºå™¨äºº
   */
  public class Robot extends Changer {
  
      public Robot(Transform transform) {
          super(transform);
          System.out.println("å˜æˆæœºå™¨äºº");
      }
  
      //å¢åŠ è¯´è¯çš„åŠŸèƒ½
      public void say() {
          System.out.println("è¯´è¯");
      }
  }
  
  
  /**
   * å…·ä½“è£…é¥°ç±»-ConcreteDecoratorB
   * è£…é¥°æˆé£æœº
   */
  public class Airplane extends Changer {
      public Airplane(Transform transform) {
          super(transform);
          System.out.println("å˜æˆé£æœº");
          fly();//
      }
  
      //å¢åŠ é£ç¿”åŠŸèƒ½
      public void fly() {
          System.out.println("é£ç¿”");
      }
  }
  
  
  /**
   * å®¢æˆ·ç«¯ä½¿ç”¨
   */
  public class Client {
      public static void main(String[] args) {
          Transform t = new Car();//è¦è¢«è£…é¥°çš„å¯¹è±¡
          t.move();//æœ€åŸºæœ¬çš„æ–¹æ³•
  
          Robot c = new Robot(t);//è£…é¥°æˆæœºå™¨äºº
          c.move();
          c.say();//å› ä¸ºè£…é¥°æˆæœºå™¨äººäº†ï¼Œæœ‰äº†è¯´è¯çš„åŠŸèƒ½
  
          Airplane a = new Airplane(c);//è£…é¥°æˆé£æœº
          a.move();
          a.fly();
  
      }
  }
  ```


### 5ã€å¤–è§‚

> å½“å®¢æˆ·ç«¯å®Œæˆä¸€ä¸ªæ“ä½œéœ€è¦è·Ÿå¤šä¸ªå¯¹è±¡äº¤äº’æ—¶ï¼Œå¦‚æœæ²¡æœ‰ä¸€ä¸ª<mark style="background: #FF5582A6;">ç»Ÿä¸€çš„å…¥å£</mark>ï¼Œå°±ä¼šè·Ÿè¿™äº›å¯¹è±¡è€¦åˆï¼Œæä¾›ä¸€ä¸ªç»Ÿä¸€çš„å…¥å£ï¼ˆä¸€ä¸ªå¤–è§‚å¯¹è±¡ï¼‰ï¼ŒæŠŠ<mark style="background: #FF5582A6;">å…·ä½“æ“ä½œçš„ç»†èŠ‚</mark><mark style="background: #D2B3FFA6;">å°è£…</mark>åˆ°è¿™ä¸ªå¤–è§‚å¯¹è±¡ä¸­ï¼Œå®¢æˆ·ç«¯å°±åªéœ€è¦è·Ÿå¤–è§‚å¯¹è±¡äº¤äº’å°±è¡Œ

- å®šä¹‰

  ä¸ºå­ç³»ç»Ÿçš„ä¸€ç»„æ¥å£æä¾›ä¸€ä¸ªç»Ÿä¸€çš„æ¥å£ï¼ŒFacadeæ¨¡å¼å°±æ˜¯å®šä¹‰ä¸€ä¸ªé«˜å±‚æ¥å£ï¼Œè¿™ä¸ªé«˜å±‚æ¥å£ä½¿å¾—è¿™ä¸€å­ç³»ç»Ÿæ›´åŠ å®¹æ˜“ä½¿ç”¨

- ä»£ç 

  ```java
  /**
   * å­ç³»ç»ŸA
   */
  public class SubSystemA {
      public void doSomething() {
          System.out.println("subsystemA handling");
      }
  }
  
  /**
   * å­ç³»ç»ŸB
   */
  public class SubSystemB {
      public void doSomething() {
          System.out.println("subsystemB handling");
      }
  }
  
  /**
   * å­ç³»ç»ŸC
   */
  public class SubSystemC {
      public void doSomething() {
          System.out.println("subsystemC handling");
      }
  }
  
  /**
   * å®¢æˆ·ç«¯
   */
  public class Client {
      public static void main(String[] args) {
          doSomething();
      }
  
      public static void doSomething() {
          //æ²¡æœ‰ç»Ÿä¸€çš„å…¥å£ï¼Œè¿™ä¸ªæ–¹æ³•éœ€è¦å’Œaã€bã€cä¸‰ä¸ªå­ç³»ç»Ÿåˆ†åˆ«äº¤äº’ï¼Œè€¦åˆåº¦é«˜
          SubSystemA a = new SubSystemA();
          SubSystemB b = new SubSystemB();
          SubSystemC c = new SubSystemC();
          a.doSomething();
          b.doSomething();
          c.doSomething();
      }
  }
  
  
  /**
   * å¤–è§‚ç±»
   */
  public class Facade {
      public void doSomething() {
          //ç”±å¤–è§‚ç±»æ¥å’Œå­ç³»ç»Ÿäº¤äº’ï¼Œç»†èŠ‚å¯¹å®¢æˆ·ç«¯ä¸å¯è§
          SubSystemA a = new SubSystemA();
          SubSystemB b = new SubSystemB();
          SubSystemC c = new SubSystemC();
          a.doSomething();
          b.doSomething();
          c.doSomething();
      }
  }
  
  
  /**
   * å®¢æˆ·ç«¯
   */
  public class Client {
      public static void main(String[] args) {
          Facade facade = new Facade();
          facade.doSomething();
      }
  }
  ```

  ![](https://raw.githubusercontent.com/guchaolong/guchaolong.github.io/master/_posts_img/design_pattern/1591372334404.png)



### 6ã€äº«å…ƒ

- å®šä¹‰

  è¿ç”¨<mark style="background: #FF5582A6;">å…±äº«æŠ€æœ¯</mark>æœ‰æ•ˆåœ°æ”¯æŒå¤§é‡ç»†ç²’åº¦å¯¹è±¡åœ°å¤ç”¨

- äº«å…ƒç±»çš„å…³é”®éƒ¨åˆ†å°±æ˜¯**äº«å…ƒå·¥å‚ç±»**ï¼Œç»´æŠ¤ä¸€ä¸ª<mark style="background: #FF5582A6;">å…±äº«æ± </mark>ï¼Œç”¨ä¸€ä¸ª<mark style="background: #FF5582A6;">Map</mark>æ¥å­˜å‚¨å¯¹è±¡ï¼Œå¯¹è±¡ä¸­å¯ä»¥å…±äº«çš„éƒ¨åˆ†ï¼ˆå³å†…éƒ¨çŠ¶æ€ï¼‰ä½œä¸º<mark style="background: #FF5582A6;">key</mark>,å®šä¹‰ä¸€ä¸ªè·å–å¯¹è±¡çš„æ–¹æ³•ï¼Œæ–¹æ³•é‡Œé€»è¾‘ï¼šå¦‚æœå­˜åœ¨è¯¥çŠ¶æ€çš„å¯¹è±¡ï¼Œåˆ™ç›´æ¥è¿”å›ï¼Œå¦‚æœä¸å­˜åœ¨åˆ™æ–°å»ºä¸€ä¸ªï¼Œputè¿›mapé‡Œï¼Œå¹¶è¿”å›è¯¥å¯¹è±¡

- ä¾‹å­

  äº”å­æ£‹ï¼Œå¦‚æœæ¯ä¸‹ä¸€æ­¥éƒ½éœ€è¦newä¸€æ£µæ£‹å­ï¼Œä¼šé€ æˆCPUå’Œå†…å­˜çš„æµªè´¹ï¼Œå…¶å®æ£‹å­åªæœ‰é»‘ç™½ä¸¤ç§ï¼Œä¸åŒçš„åªæ˜¯è½å­çš„ä½ç½®ï¼Œè¿™é‡Œçš„é»‘ç™½æ˜¯**å†…éƒ¨çŠ¶æ€**å†…éƒ¨çŠ¶æ€æ˜¯å¯ä»¥å…±äº«çš„ï¼Œä½ç½®æ˜¯**å¤–éƒ¨çŠ¶æ€**ï¼Œå¤–éƒ¨çŠ¶æ€ä¸èƒ½å…±äº«

  å› æ­¤æŠŠä¸èƒ½å…±äº«çš„å¤–éƒ¨çŠ¶æ€åˆ†ç¦»å‡ºå»ï¼Œå†…éƒ¨çŠ¶æ€çš„å¯¹è±¡å°±å¯ä»¥å¤ç”¨

  ```java
  /**
   * äº«å…ƒç±»
   */
  public class Chess {
      //å†…éƒ¨çŠ¶æ€ï¼ˆå¯ä»¥å…±äº«çš„ï¼‰
      private String color;
  
      //å¯ä»¥å…±äº«çš„å†…éƒ¨çŠ¶æ€ ä½œä¸ºæ„é€ å‡½æ•°çš„å‚æ•°
      public Chess(String color) {
          this.color = color;
      }
  
      //ä¸šåŠ¡æ–¹æ³•-åœ¨localä½ç½®è½å­
      public void operation(Local local) {
          System.out.println("æ£‹å­é¢œè‰²ï¼š" + color + " è½å­ä½ç½®ï¼š" + local);
      }
  }
  
  
  /**
   * å¤–éƒ¨çŠ¶æ€-ä½ç½®
   */
  public class Local {
      private int x;
      private int y;
  
      public Local(int x, int y) {
          this.x = x;
          this.y = y;
      }
  
      @Override
      public String toString() {
          return "Local{" +
                  "x=" + x +
                  ", y=" + y +
                  '}';
      }
  }
  
  
  /**
   * äº«å…ƒå·¥å‚ç±»
   */
  public class ChessFactory {
      private static ChessFactory INSTANCE;
  
      private ChessFactory() {
      }
  
      private ConcurrentHashMap<String, Chess> chessMap;//å…±äº«æ± 
  
      //åŒé‡é”å•ä¾‹æ¨¡å¼è·å–æ£‹å­å·¥å‚ç±»
      public static ChessFactory getInstance() {
          if (INSTANCE == null) {
              synchronized (ChessFactory.class) {
                  if (INSTANCE == null) {
                      INSTANCE = new ChessFactory();
                  }
              }
          }
          return INSTANCE;
      }
  
      public Chess getChess(String color) {
          if (!chessMap.containsKey(color)) {
              chessMap.put(color, new Chess(color));
          }
          return chessMap.get(color);
      }
  }
  
  
  /**
   * å®¢æˆ·ç«¯ä½¿ç”¨
   */
  public class Client {
      public static void main(String[] args) {
          String black = "é»‘è‰²";
          String white = "ç™½è‰²";
  
          ChessFactory factory = ChessFactory.getInstance();
          Chess chess = factory.getChess(black);
          chess.operation(new Local(1,2));
          Chess chess2 = factory.getChess(white);
          chess2.operation(new Local(3,5));
      }
  }
  ```


### 7ã€ä»£ç†

- åŠ¨æœº

  ä¸€ä¸ªå®¢æˆ·ä¸æƒ³æˆ–ä¸èƒ½ç›´æ¥å¼•ç”¨ä¸€ä¸ªå¯¹è±¡ï¼Œå¯ä»¥é€šè¿‡ä¸€ä¸ªç§°ä¹‹ä¸ºâ€œä»£ç†â€çš„ç¬¬ä¸‰è€…æ¥å®ç°é—´æ¥å¼•ç”¨

- å®šä¹‰

  <mark style="background: #FF5582A6;">ç»™æŸä¸€ä¸ªå¯¹è±¡æä¾›ä¸€ä¸ªä»£ç†ï¼Œå¹¶ç”±ä»£ç†å¯¹è±¡æ§åˆ¶å¯¹åŸæœ‰å¯¹è±¡çš„å¼•ç”¨</mark>

- ç±»å›¾

  ![](https://raw.githubusercontent.com/guchaolong/guchaolong.github.io/master/_posts_img/design_pattern/1591444432942.png)

- ä¾‹å­

  æ˜æ˜ŸStarï¼Œéƒ½æœ‰å”±æ­Œsing()ã€è·³èˆdance()çš„æ–¹æ³•ï¼Œå…·ä½“æ˜æ˜Ÿå¯¹è±¡æœ‰LiuDeHuaã€ZhouJieLun

  ç°åœ¨æˆ‘è¦è¯·åˆ˜å¾·åç»™æˆ‘å”±æ­Œï¼Œå¹¶ä¸”è¦åœ¨åˆ˜å¾·åå”±æ­Œå‰è®°å½•å¼€å§‹æ—¶é—´ï¼Œå”±å®Œåè®°å½•ç»“æŸæ—¶é—´ï¼Œæˆ‘ä¸èƒ½ç›´æ¥æ¥è§¦åˆ°åˆ˜å¾·åï¼Œå› æ­¤ä¸èƒ½è®©åˆ˜å¾·åè‡ªå·±å»è®°å½•ï¼Œæ€ä¹ˆåŠå‘¢ï¼Œå»æ‰¾åˆ˜å¾·åçš„ç»çºªäººï¼Œç»çºªäººå¯ä»¥å¸®æˆ‘è®°å½•æ—¶é—´

- é™æ€ä»£ç†

  > ä»£ç†ç±»ï¼ˆç»çºªäººï¼‰æ˜¯æˆ‘è‡ªå·±ç”Ÿæˆçš„

  æ–¹æ¡ˆä¸€ï¼šè®©ç»çºªäººç»§æ‰¿åˆ˜å¾·åï¼Œå°±æœ‰äº†å”±æ­Œè·³èˆçš„æ–¹æ³•ï¼Œæˆ‘å°±å¯ä»¥åœ¨ç»çºªäººçš„è¿™ä¸¤ä¸ªæ–¹æ³•é‡Œè®°å½•æ—¶é—´ï¼Œå¦‚æœæˆ‘ä¸æƒ³è®°å½•æ—¶é—´äº†ï¼Œæˆ‘å¸Œæœ›åœ¨å”±æ­Œå‰ç»™æˆ‘è¯´å¥ç¥ç¦è¯­ï¼Œé‚£ä¹‹å‰çš„ç»çºªäººå°±ä¸è¡Œäº†ï¼Œå› ä¸ºä»–æ˜¯è´Ÿè´£è®°å½•æ—¶é—´çš„ï¼Œæˆ‘å°±å¾—é‡æ–°æ‰¾ä¸ªç»çºªäºº2ç»§æ‰¿åˆ˜å¾·åï¼Œå†åœ¨è¿™ä¸ªç»çºªäºº2çš„æ–¹æ³•é‡Œè¯´ç¥ç¦è¯­...å¦‚æœåˆæœ‰å…¶ä»–éœ€æ±‚ï¼Œåˆå¾—æ–°åŠ ç»çºªäººï¼Œè¿™æ ·çš„è¯çµæ´»æ€§ä¸å¤Ÿï¼Œä¼šé€ æˆç±»çˆ†ç‚¸

  æ–¹æ¡ˆäºŒï¼šè®©ç»çºªäººå’Œåˆ˜å¾·åéƒ½å®ç°Staræ¥å£ï¼Œå¹¶ä¸”ç»çºªäººæŒæœ‰ä¸€ä¸ªStarç±»å‹çš„å¼•ç”¨ï¼ˆè¢«ä»£ç†å¯¹è±¡ï¼‰ï¼ŒçœŸæ­£å”±æ­Œçš„æ—¶å€™ï¼Œè°ƒä»–æŒæœ‰çš„å¼•ç”¨çš„æ–¹æ³•ï¼Œå†åŠ ä¸Šè‡ªå·±çš„é€»è¾‘ï¼Œè¿™æ ·çš„è¯ï¼Œä»£ç†å¯¹è±¡åˆå¯ä»¥ä½œä¸ºè¢«ä»£ç†å¯¹è±¡äº†

  ```java
  /**
   * æŠ½è±¡ä¸»é¢˜è§’è‰²-Subject
   * ç”³æ˜äº†çœŸå®ä¸»é¢˜å’Œä»£ç†ä¸»é¢˜çš„å…±åŒæ¥å£ï¼Œè¿™æ ·ä¾èµ–ä»»ä½•ä½¿ç”¨çœŸå®ä¸»é¢˜çš„åœ°æ–¹éƒ½
   * å¯ä»¥ä½¿ç”¨ä»£ç†ä¸»é¢˜ã€‚
   * å®¢æˆ·ç«¯éœ€è¦é’ˆå¯¹æŠ½è±¡ä¸»é¢˜è§’è‰²è¿›è¡Œç¼–ç¨‹
   */
  public interface Star {
      void sing();
      void dance();
  }
  
  /**
   * çœŸå®ä¸»é¢˜è§’è‰²-RealSubject
   * å®ç°äº†çœŸå®çš„ä¸šåŠ¡æ“ä½œï¼Œå®¢æˆ·ç«¯å¯ä»¥é€šè¿‡ä»£ç†ä¸»é¢˜è§’è‰²é—´æ¥è°ƒç”¨çœŸå®
   * ä¸»é¢˜è§’è‰²ä¸­å®šä¹‰çš„æ–¹æ³•
   */
  public class LiuDeHua implements Star {
      @Override
      public void sing() {
          System.out.println("liu de hua sing...");
      }
      @Override
      public void dance() {
          System.out.println("liu de hua dancing");
      }
  }
  
  
  /**
   * ä»£ç†ä¸»é¢˜è§’è‰²-Proxy
   * æ—¶é—´ä»£ç†ç±»ï¼ŒåŒ…å«äº†å¯¹çœŸå®ä¸»é¢˜è§’è‰²çš„å¼•ç”¨
   */
  public class LiuDeHuaTimeProxy implements Star {
      //è¢«ä»£ç†å¯¹è±¡
      private Star star;
  
      public LiuDeHuaTimeProxy(Star star) {
          this.star = star;
      }
  
      @Override
      public void sing() {
          System.out.println("before time:" + System.currentTimeMillis());
          star.sing();
          System.out.println("end time:" + System.currentTimeMillis());
      }
  
      @Override
      public void dance() {
          System.out.println("before time:" + System.currentTimeMillis());
          star.dance();
          System.out.println("end time:" + System.currentTimeMillis());
      }
  }
  
  
  public class Client {
      public static void main(String[] args) {
          Star star = new LiuDeHua();
          Star proxy = new LiuDeHuaTimeProxy(star);
          proxy.sing();
          proxy.dance();
      }
  }
  
  
  è¾“å‡ºï¼š
  before time:1591444179499
  liu de hua sing...
  end time:1591444179499
  before time:1591444179499
  liu de hua dancing
  end time:1591444179499
  
  
  ```

- JDKåŠ¨æ€ä»£ç†

  > éœ€è¦è¢«ä»£ç†å¯¹è±¡å®ç°æ¥å£

  ```java
  /**
   * å¢åŠ ä¸€ä¸ªæŠ½è±¡æ¥å£-æ¼”å‘˜
   */
  public interface Player {
      void play();
  }
  
  /**
   * çœŸå®ä¸»é¢˜è§’è‰²-RealSubject
   * å®ç°äº†çœŸå®çš„ä¸šåŠ¡æ“ä½œï¼Œå®¢æˆ·ç«¯å¯ä»¥é€šè¿‡ä»£ç†ä¸»é¢˜è§’è‰²é—´æ¥è°ƒç”¨çœŸå®
   * ä¸»é¢˜è§’è‰²ä¸­å®šä¹‰çš„æ–¹æ³•
   */
  public class LiuDeHua implements Star, Player {
      @Override
      public void sing() {
          System.out.println("liu de hua sing...");
      }
      @Override
      public void dance() {
          System.out.println("liu de hua dancing");
      }
  
      @Override
      public void play() {
          System.out.println("liu de hua playing");
      }
  }
  
  
  public class Client2 {
      public static void main(String[] args) {
          Star star = new LiuDeHua();
          // åœ¨å·¥ç¨‹ä¸­ä¿å­˜jdkç”Ÿæˆçš„ä»£ç†ç±»
          System.getProperties().put("sun.misc.ProxyGenerator.saveGeneratedFiles", "true");
          /**
           * ä½¿ç”¨JDKåŠ¨æ€ä»£ç†ç”Ÿäº§åŠ¨æ€ä»£ç†ç±»
           * Proxy.newProxyInstance
           * ç¬¬ä¸€ä¸ªå‚æ•°ï¼ŒclassLoader ç›´æ¥ä½¿ç”¨çœŸå®å¯¹è±¡çš„classLoaderå°±è¡Œ
           * ç¬¬äºŒä¸ªå‚æ•°ï¼Œå®ç°çš„æ¥å£ï¼Œ
           * ç¬¬ä¸‰ä¸ªå¯¹è±¡ï¼Œè°ƒç”¨å¤„ç†ï¼ŒçœŸæ­£çš„é€»è¾‘å°±å†™åœ¨æ­¤å¤„ï¼Œè¿˜æ˜¯è°ƒç”¨çœŸå®å¯¹è±¡çš„æ–¹æ³•
           */
          Star o = (Star) Proxy.newProxyInstance(star.getClass().getClassLoader(), 
                  star.getClass().getInterfaces(),
                  new InvocationHandler() {
                      @Override
                      public Object invoke(Object o, Method method, Object[] objects) throws Throwable {
                          System.out.println("liu de hua " + method.getName() + " start, time:" + System.currentTimeMillis());
                          Object result = method.invoke(star, objects);
                          System.out.println("liu de hua " + method.getName() + " end, time:" + System.currentTimeMillis());
                          return result;
                      }
                  });
          o.sing();
          o.dance();
          Player p = (Player) o;
          p.play();
      }
  }
  ```


## è¡Œä¸ºå‹

> åˆ›å»ºå‹å…³æ³¨å¯¹è±¡çš„åˆ›å»º
>
> ç»“æ„å‹å…³æ³¨å¯¹è±¡ä¸ç±»çš„ç»„ç»‡
>
> è¡Œä¸ºå‹å…³æ³¨å¯¹è±¡ä¹‹é—´çš„äº¤äº’ï¼Œä¸åŒå¯¹è±¡ä¹‹é—´åˆ’åˆ†è´£ä»»å’Œç®—æ³•çš„æŠ½è±¡åŒ–

### 1ã€èŒè´£é“¾

é“¾å¼å¤„ç†è¯·æ±‚ï¼Œå°†èƒ½å¤Ÿå¤„ç†åŒä¸€ç±»è¯·æ±‚çš„å¯¹è±¡è¿æˆä¸€æ¡é“¾ï¼Œæ‰€æäº¤çš„è¯·æ±‚æ²¿ç€é“¾ä¼ é€’ï¼Œé“¾ä¸Šçš„å¯¹è±¡é€ä¸ªåˆ¤æ–­æ˜¯å¦åˆèƒ½åŠ›å¤„ç†è¯¥è¯·æ±‚ï¼Œå¦‚æœæœ‰åˆ™å¤„ç†ï¼Œå¦‚æœä¸èƒ½åˆ™ä¼ é€’ç»™ä¸‹ä¸€ä¸ªå¤„ç†å¯¹è±¡

```java
/**
 * è¯·æ±‚å¯¹è±¡
 */
public class Request {
    private String state;

    public Request(String state) {
        this.state = state;
    }

    public String getState() {
        return state;
    }

    public void setState(String state) {
        this.state = state;
    }
}


/**
 * æŠ½è±¡å¤„ç†ç±»
 */
public abstract class AbstractHandler {
    //ç¬¬ä¸€ä¸ªhandler
    public static AbstractHandler startHandler = new Handler1();
    //ä¸‹ä¸€ä¸ªhandler
    private AbstractHandler nextHandler;

    //åˆå§‹åŒ–å¤„ç†é“¾
    static {
        startHandler.setNextHandler(new Handler2())
                .setNextHandler(new Handler3());
    }

    //è¿”å›å½“å‰å¯¹è±¡ï¼Œå¯ä»¥é“¾å¼è°ƒç”¨
    private AbstractHandler setNextHandler(AbstractHandler handler) {
        this.nextHandler = handler;
        return this.nextHandler;
    }

    protected void commonLog() {
        System.out.println(this.getClass().getName());
    }

    protected boolean needHandle(Request request) {
        return true;
    }

    protected void handle(Request r) {
        if (this.nextHandler != null) {
            this.nextHandler.handle(r);
        }
    }
}


public class Handler1 extends AbstractHandler {

    @Override
    public boolean needHandle(Request request) {
        return request.getState().equals("handle1");
    }

    @Override
    protected void handle(Request request) {
        if(needHandle(request)){
            System.out.println("handler1 ...................");
            request.setState("handle2");
        }
        super.handle(request);
    }
}

public class Handler2 extends AbstractHandler {
    @Override
    public boolean needHandle(Request request) {
        return request.getState().equals("handle2");
    }

    @Override
    protected void handle(Request request) {
        if(needHandle(request)){
            System.out.println("handler2 ...................");
            request.setState("handle3");
        }
        super.handle(request);
    }
}

.....

public class Client {
    public static void main(String[] args) {
        Request req = new Request("handle1");
        AbstractHandler.startHandler.handle(req);
    }
}
```



![](https://raw.githubusercontent.com/guchaolong/guchaolong.github.io/master/_posts_img/design_pattern/1591515126789.png)

### 2ã€å‘½ä»¤

- ç±»å›¾

  ![](https://raw.githubusercontent.com/guchaolong/guchaolong.github.io/master/_posts_img/design_pattern/1591543946980.png)

  ![](https://raw.githubusercontent.com/guchaolong/guchaolong.github.io/master/_posts_img/design_pattern/1591543917341.png)


### 3ã€è§£é‡Šå™¨-ç•¥

### 4ã€è¿­ä»£å™¨

> æ ¹æ®â€œå•ä¸€èŒè´£åŸåˆ™â€ï¼Œå¯¹è±¡æ‰¿æ‹…çš„æŒ‡è´£è¶Šå°‘ï¼Œåˆ™è¯¥å¯¹è±¡çš„ç¨³å®šæ€§å°±è¶Šå¥½ï¼Œå—åˆ°çš„çº¦æŸå°±è¶Šå°‘ï¼Œå¤ç”¨ä¹Ÿå°±è¶Šæ–¹ä¾¿ï¼ŒèŒè´£åˆ†ç¦»çš„è¦ç‚¹å°±æ˜¯å¯¹è¢«åˆ†ç¦»çš„èŒè´£è¿›è¡Œå°è£…ï¼Œå¹¶ä»¥æŠ½è±¡çš„æ–¹å¼å»ºç«‹èµ·å½¼æ­¤ä¹‹é—´çš„å…³ç³»ï¼Œ
>
> èšåˆå¯¹è±¡ä¸»è¦æ‹¥æœ‰ä¸¤ä¸ªèŒè´£ï¼šä¸€æ˜¯å­˜å‚¨å†…éƒ¨æ•°æ®ï¼ŒäºŒæ˜¯éå†å†…éƒ¨æ•°æ®ã€‚ä½†æ˜¯å‰è€…æ˜¯èšåˆå¯¹è±¡çš„åŸºæœ¬åŠŸèƒ½ï¼Œè€Œåè€…æ˜¯å¯ä»¥åˆ†ç¦»çš„ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å°†éå†èšåˆå¯¹è±¡ä¸­æ•°æ®çš„è¡Œä¸ºæå–å‡ºæ¥ï¼Œå°è£…åˆ°ä¸€ä¸ªè¿­ä»£å™¨ä¸­ï¼Œé€šè¿‡ä¸“é—¨çš„è¿­ä»£å™¨æ¥éå†èšåˆå¯¹è±¡çš„å†…éƒ¨æ•°æ®ï¼Œè¿™å°±æ˜¯è¿­ä»£å™¨çš„æœ¬è´¨ï¼Œè¿­ä»£å™¨æ¨¡å¼æ˜¯â€œå•ä¸€èŒè´£åŸåˆ™â€çš„å®Œç¾ä½“ç°

- å®šä¹‰

  æä¾›ä¸€ç§æ–¹æ³•æ¥è®¿é—®èšåˆå¯¹è±¡ï¼Œè€Œä¸ç”¨æš´éœ²è¿™ä¸ªå¯¹è±¡çš„å†…éƒ¨ç»“æ„ï¼Œå…¶åˆ«åä¸ºæ¸¸æ ‡ï¼ˆCursor)

- ç±»å›¾

  ![](https://raw.githubusercontent.com/guchaolong/guchaolong.github.io/master/_posts_img/design_pattern/1592113541199.png)

### 5ã€ä¸­ä»‹è€…-ç•¥

### 6ã€å¤‡å¿˜å½•

> æä¾›å¯¹è±¡çš„çŠ¶æ€æ¢å¤æœºåˆ¶

- å®šä¹‰

  åœ¨ä¸ç ´åå°è£…çš„å‰æä¸‹ï¼Œæ•è·ä¸€ä¸ªå¯¹è±¡çš„å†…éƒ¨çŠ¶æ€ï¼Œå¹¶åœ¨è¯¥å¯¹è±¡ä¹‹å¤–ä¿å­˜è¿™ä¸ªçŠ¶æ€ï¼Œè¿™æ ·å¯ä»¥åœ¨ä»¥åå°†å¯¹è±¡æ¢å¤åˆ°åŸå…ˆä¿å­˜çš„çŠ¶æ€

- ç±»å›¾

  ![](https://raw.githubusercontent.com/guchaolong/guchaolong.github.io/master/_posts_img/design_pattern/1592132852805.png)

- å®ä¾‹ 

â€‹	Originator(åŸå‘å™¨ï¼‰
  ```java
  /**
   * Originator(åŸå‘å™¨ï¼‰
   * éœ€è¦è¢«æ¢å¤æŸä¸ªçŠ¶æ€çš„å¯¹è±¡
   */
  public class UserInfoDTO {
      private String account;
      private String password;
      private String telNo;
  
      public Memento saveMemento(){
          return new Memento(account, password, telNo);
      }
  
      public void restoreMemento(Memento memento){
          this.account = memento.getAccount();
          this.password = memento.getPassword();
          this.telNo = memento.getTelNo();
      }
  
      public String getAccount() {
          return account;
      }
  
      public void setAccount(String account) {
          this.account = account;
      }
  
      public String getPassword() {
          return password;
      }
  
      public void setPassword(String password) {
          this.password = password;
      }
  
      public String getTelNo() {
          return telNo;
      }
  
      public void setTelNo(String telNo) {
          this.telNo = telNo;
      }
  
      @Override
      public String toString() {
          return "UserInfoDTO{" +
                  "account='" + account + '\'' +
                  ", password='" + password + '\'' +
                  ", telNo='" + telNo + '\'' +
                  '}';
      }
  }
  ```

Memento(å¤‡å¿˜å½•ï¼‰
  ```java
  /**
   * Memento(å¤‡å¿˜å½•ï¼‰
   * å­˜å‚¨åŸå‘å™¨çš„å†…éƒ¨çŠ¶æ€ï¼Œæ ¹æ®åŸå‘å™¨æ¥å†³å®šä¿å­˜å“ªäº›å†…éƒ¨çŠ¶æ€
   */
  class Memento {
      private String account;
      private String password;
      private String telNo;
  
      public Memento(String account, String password, String telNo) {
          this.account = account;
          this.password = password;
          this.telNo = telNo;
      }
  
      public String getAccount() {
          return account;
      }
  
      public void setAccount(String account) {
          this.account = account;
      }
  
      public String getPassword() {
          return password;
      }
  
      public void setPassword(String password) {
          this.password = password;
      }
  
      public String getTelNo() {
          return telNo;
      }
  
      public void setTelNo(String telNo) {
          this.telNo = telNo;
      }
  }
  ```

Caretaker(è´Ÿè´£äººï¼‰
  ```java
  /**
   * Caretaker(è´Ÿè´£äººï¼‰
   * è´Ÿè´£äººåˆç§°ç®¡ç†è€…ï¼Œè´Ÿè´£ä¿å­˜å¤‡å¿˜å½•ï¼Œä½†æ˜¯ä¸èƒ½å¯¹å¤‡å¿˜å½•çš„å†…å®¹è¿›è¡Œæ“ä½œæˆ–æ£€æŸ¥
   * è´Ÿè´£äººä¸­å¯ä»¥å­˜å‚¨ä¸€ä¸ªæˆ–å¤šä¸ªå¤‡å¿˜å½•å¯¹è±¡ï¼Œå®ƒåªè´Ÿè´£å­˜å‚¨å¯¹è±¡ï¼Œä¸èƒ½ä¿®æ”¹å¯¹è±¡ï¼Œ
   * ä¹Ÿæ— éœ€çŸ¥é“å¯¹è±¡çš„å®ç°ç»†èŠ‚
   */
  public class Caretaker {
      private Memento memento;
  
      public Memento getMemento() {
          return memento;
      }
  
      public void setMemento(Memento memento) {
          this.memento = memento;
      }
  }
  ```

client
  ```java
  public class Client {
      public static void main(String[] args) {
          UserInfoDTO user = new UserInfoDTO();
          user.setAccount("oldAccount");
          user.setPassword("oldPassword");
          user.setTelNo("oldTelNo");
          System.out.println(user);
  
          Caretaker caretaker = new Caretaker();
          Memento memento = user.saveMemento();
          caretaker.setMemento(memento);
  
          user.setAccount("newAccount");
          user.setPassword("newPassword");
          user.setTelNo("newTelNo");
          System.out.println(user);
  
          user.restoreMemento(caretaker.getMemento());
          System.out.println(user);
      }
  }
  ```

### 7ã€è§‚å¯Ÿè€…

- å®šä¹‰

  å®šä¹‰å¯¹è±¡é—´çš„ä¸€ç§ä¸€å¯¹å¤šä¾èµ–å…³ç³»ï¼Œä½¿å¾—æ¯å½“ä¸€ä¸ªå¯¹è±¡çŠ¶æ€å‘ç”Ÿæ”¹å˜æ—¶ï¼Œå…¶ç›¸å…³ä¾èµ–å¯¹è±¡çš†å¾—åˆ°é€šçŸ¥å¹¶è‡ªåŠ¨æ›´æ–°

  > åˆå«
  >
  > å‘å¸ƒ-è®¢é˜…ï¼ˆPublish/Subscribe)
  >
  > æ¨¡å‹-è§†å›¾ï¼ˆModel/View)
  >
  > æº-ç›‘å¬å™¨ï¼ˆSource/Listener)

- ç±»å›¾

  ![](https://raw.githubusercontent.com/guchaolong/guchaolong.github.io/master/_posts_img/design_pattern/1592135095241.png)


### 8ã€çŠ¶æ€

> æ ¹æ®çŠ¶æ€å†³å®šè¡Œä¸º

æ ¹æ®ä¸åŒçš„çŠ¶æ€æœ‰ä¸åŒçš„æ“ä½œï¼Œå¦‚æœä¸é€‚ç”¨çŠ¶æ€æ¨¡å¼ï¼Œæ™®é€šçš„æ–¹æ³•å°±æ˜¯if...elseæˆ–è€…switch,è¿™æ ·çš„è¯å¦‚æœå¢åŠ æŸä¸ªçŠ¶æ€å°±è¦ä¿®æ”¹æºä»£ç ï¼Œè¿åå¼€é—­åŸåˆ™ï¼Œåˆ©ç”¨çŠ¶æ€æ¨¡å¼ï¼Œå°±æ˜¯æŠŠå…·ä½“çš„æ“ä½œå°è£…çš„æŸä¸ªçŠ¶æ€ç±»é‡Œé¢ï¼Œè°ƒç”¨å¤„èšåˆæŠ½è±¡çŠ¶æ€ç±»å°±è¡Œ

- å®šä¹‰

  å…è®¸ä¸€ä¸ªå¯¹è±¡åœ¨å…¶å†…éƒ¨çŠ¶æ€æ”¹å˜æ—¶æ”¹å˜å®ƒçš„è¡Œä¸ºï¼Œå¯¹è±¡çœ‹èµ·æ¥ä¼¼ä¹ä¿®æ”¹äº†å®ƒçš„ç±»

- ç±»å›¾

  ![](https://raw.githubusercontent.com/guchaolong/guchaolong.github.io/master/_posts_img/design_pattern/1592139572902.png)

- è§’è‰²

  - Context(ç¯å¢ƒç±»)ï¼šä¸Šä¸‹æ–‡ç±»ï¼Œå®ƒæ˜¯æ‹¥æœ‰çŠ¶æ€çš„å¯¹è±¡ï¼ŒçŠ¶æ€å­˜åœ¨å¤šæ ·æ€§ä¸”åœ¨ä¸åŒçš„çŠ¶æ€ä¸‹ï¼Œå¯¹è±¡çš„è¡Œä¸ºæœ‰æ‰€ä¸åŒï¼Œå› æ­¤å°†çŠ¶æ€ç‹¬ç«‹å‡ºå»å½¢æˆå•ç‹¬çš„çŠ¶æ€ç±»ï¼Œåœ¨ç¯å¢ƒç±»ä¸­ç»´æŠ¤ä¸€ä¸ªæŠ½è±¡çŠ¶æ€ç±»Stateçš„å®ä¾‹ï¼Œè¿™ä¸ªå®ä¾‹å®šä¹‰å½“å‰çš„çŠ¶æ€
  - State(æŠ½è±¡çŠ¶æ€ç±»)ï¼šç”¨äºå®šä¹‰ä¸€ä¸ªæ¥å£ä»¥å°è£…ä¸ç¯å¢ƒç±»çš„ä¸€ä¸ªç‰¹å®šçŠ¶æ€ç›¸å…³çš„è¡Œä¸ºï¼Œåœ¨æŠ½è±¡çŠ¶æ€ä¸­ç”³æ˜äº†å„ç§ä¸åŒçŠ¶æ€å¯¹åº”çš„æ–¹æ³•ï¼Œè€Œåœ¨å…¶å­ç±»ä¸­å®ç°è¿™äº›æ–¹æ³•ï¼Œç”±äºä¸åŒçŠ¶æ€ä¸‹å¯¹è±¡çš„è¡Œä¸ºå¯èƒ½ä¸åŒï¼Œå› æ­¤åœ¨ä¸åŒå­ç±»ä¸­æ–¹æ³•çš„å®ç°å¯èƒ½å­˜åœ¨ä¸åŒï¼Œç›¸åŒçš„æ–¹æ³•å¯ä»¥å¸è½½æŠ½è±¡çŠ¶æ€ç±»ä¸­
  - ConcreteState(å…·ä½“çŠ¶æ€ç±»)ï¼šæ¯ä¸€ä¸ªå­ç±»å®ç°ä¸€ä¸ªä¸ç¯å¢ƒç±»çš„ä¸€ä¸ªçŠ¶æ€ç›¸å…³çš„è¡Œä¸º

### 9ã€ç­–ç•¥

- å®šä¹‰

  å‡†å¤‡ä¸€ç»„ç®—æ³•ï¼Œå¹¶å°†æ¯ä¸€ä¸ªç®—æ³•å°è£…èµ·æ¥ï¼Œä½¿å¾—å®ƒä»¬å¯ä»¥äº’æ¢

- ç±»å›¾

  ![](https://raw.githubusercontent.com/guchaolong/guchaolong.github.io/master/_posts_img/design_pattern/1590503244545.png)

- è§’è‰²

  - **ç¯å¢ƒ(Context)è§’è‰²ï¼š** æŒæœ‰ä¸€ä¸ªStrategyçš„å¼•ç”¨
  - **æŠ½è±¡ç­–ç•¥(Strategy)è§’è‰²ï¼š** è¿™æ˜¯ä¸€ä¸ªæŠ½è±¡è§’è‰²ï¼Œé€šå¸¸ç”±ä¸€ä¸ªæ¥å£æˆ–æŠ½è±¡ç±»å®ç°ã€‚æ­¤è§’è‰²ç»™å‡ºæ‰€æœ‰çš„å…·ä½“ç­–ç•¥ç±»æ‰€éœ€çš„æ¥å£
  - **å…·ä½“ç­–ç•¥(ConcreteStrategy)è§’è‰²ï¼š** åŒ…è£…äº†ç›¸å…³çš„ç®—æ³•æˆ–è¡Œä¸º

- åº”ç”¨

  ä¸€ä¸ªé¸­å­ç±»Duckï¼Œå®ƒçš„å­ç±»ç»§æ‰¿Duckï¼Œå°±èƒ½ç»§æ‰¿åˆ°çˆ¶ç±»çš„æ–¹æ³•ï¼ˆä»£ç é‡ç”¨ï¼‰ï¼Œä½†æ˜¯å¹¶éæ‰€æœ‰çš„æ–¹æ³•éƒ½åº”è¯¥ç»§æ‰¿ï¼Œæ¯”å¦‚æœ‰ä¸€ä¸ªæ–¹æ³•fly()ï¼Œå­ç±»çš„è¿™ä¸ªæ–¹æ³•æœ‰ä¸åŒçš„å®ç°ï¼Œç”šè‡³æœ‰çš„å­ç±»æ¯”å¦‚å¡‘æ–™é¸­ä¸ä¼šé£ï¼Œè¿™æ ·çš„è¯å°±è¦åœ¨å­ç±»ä¸­é‡å†™ï¼Œè¿™æ ·ä¼šå‡ºç°å¤§é‡çš„ç±»ï¼Œåœ¨è¿™ä¸ªç±»ä¸­å˜åŒ–çš„éƒ¨åˆ†æ˜¯fly()ï¼Œå¯ä»¥æŠŠè¿™éƒ¨åˆ†å°è£…èµ·æ¥ï¼Œå®šä¹‰ä¸€ä¸ªæ¥å£FlyBehaviorï¼Œç„¶åæœ‰ä¸åŒçš„å®ç°ï¼ŒDuckç±»ä¸­æŒæœ‰ä¸€ä¸ªFlyBehaviorå¼•ç”¨


  åšä¸€ä»¶äº‹æœ‰å¤šç§æ–¹æ³•ï¼Œæ™®é€šçš„å†™æ³•å°±æ˜¯if-elseæˆ–switchï¼Œè¿™æ ·çš„è¯ä»£ç è€¦åˆåº¦å¤ªé«˜äº†ï¼Œæ–°åŠ ä¸€ç§æ–¹æ³•å°±è¦ä¿®æ”¹if-else\switchï¼Œè¿åäº†å¼€é—­åŸåˆ™ï¼Œäºæ˜¯å°è£…å…·ä½“çš„ç®—æ³•ï¼Œæ”¾åˆ°ç®—æ³•çš„ä¸Šä¸‹æ–‡Contextä¸­ï¼ˆæŒæœ‰Strategyå¼•ç”¨ï¼‰ï¼Œè¿™ä¸ªContextèµ·åˆ°äº†æ‰¿ä¸Šå¯ä¸‹çš„ä½œç”¨ï¼Œå°±åƒé¸­å­ç±»ï¼Œfly()å±äºé¸­å­ï¼›å‡ºè¡Œæœ‰å¤šç§å‡ºè¡Œæ–¹å¼ï¼Œå‡ºè¡Œæ˜¯æ¸¸å®¢çš„è¡Œä¸ºï¼Œæ‰€ä»¥Contextå°±æ˜¯æ¸¸å®¢

- JDKæˆ–Springä¸­çš„åº”ç”¨

  å®ç°Comparatoræ¥å£ï¼Œå¯ä»¥å®šä¹‰ä¸åŒçš„æ¯”è¾ƒå™¨ï¼Œ
  `Arrays.sort(T[] a, Comparator<? super T> c)`



### 10ã€æ¨¡æ¿æ–¹æ³•

- å®šä¹‰

  å®šä¹‰ä¸€ä¸ªæ“ä½œä¸­ç®—æ³•çš„éª¨æ¶ï¼Œè€Œå°†ä¸€äº›æ­¥éª¤å»¶è¿Ÿåˆ°å­ç±»ä¸­ï¼Œæ¨¡æ¿æ–¹æ³•ä½¿å¾—å­ç±»å¯ä»¥ä¸æ”¹å˜ä¸€ä¸ªç®—æ³•çš„ç»“æ„å³å¯é‡æ–°å®šä¹‰è¯¥ç®—æ³•çš„æŸäº›ç‰¹å®šæ­¥éª¤

- ç±»å›¾

  ![](https://raw.githubusercontent.com/guchaolong/guchaolong.github.io/master/_posts_img/design_pattern/1592140914519.png)


### 11ã€è®¿é—®è€…-ç•¥


